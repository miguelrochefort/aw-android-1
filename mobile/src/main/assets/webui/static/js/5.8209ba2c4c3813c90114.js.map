{"version":3,"sources":["webpack:///./src/util/time.js","webpack:///./src/queries.js","webpack:///./src/views/ActivityDaily.vue?d4ba","webpack:///./src/views/ActivityDaily.vue?5b10","webpack:///./src/views/ActivityDaily.vue?fb93","webpack:///./src/views/ActivityDaily.vue?4e30","webpack:///src/views/ActivityDaily.vue","webpack:///./src/views/ActivityDaily.vue?e1d7","webpack:///./src/views/ActivityDaily.vue"],"names":["__webpack_require__","r","__webpack_exports__","moment__WEBPACK_IMPORTED_MODULE_0__","moment__WEBPACK_IMPORTED_MODULE_0___default","n","seconds_to_duration","seconds","result","hrs","Math","floor","min","sec","get_day_start","datestr","datestart","moment","set","get_prev_day","add","get_next_day","querystr_to_array","querystr","split","filter","l","map","appnames","chrome","firefox","opera","brave","summaryQuery","windowbucket","afkbucket","count","replace","concat","windowQuery","appcount","titlecount","filterAFK","browserSummaryQuery","browserbuckets","limit","lodash_map__WEBPACK_IMPORTED_MODULE_2___default","b","code","lodash_each__WEBPACK_IMPORTED_MODULE_1___default","browserName","bucketId","lodash_filter__WEBPACK_IMPORTED_MODULE_0___default","buckets","indexOf","undefined","appnames_str","JSON","stringify","appQuery","appbucket","dailyActivityQuery","dailyActivityQueryAndroid","androidbucket","editorActivityQuery","editorbucket","content","module","i","options","hmr","transform","insertInto","locals","exports","_node_modules_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ActivityDaily_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","push","_queryDailyActivity","_queryEditorActivity","_queryBrowserDomains","_queryWindows","_getEditorBucket","_getBrowserBucket","views_ActivityDailyvue_type_script_lang_js_","name","data","today","moment_default","startOf","format","timelineShowAFK","view","duration","errormsg","daily_activity","events_apptimeline","browserBuckets","browserBucketSelected","editorBuckets","editorBucketId","top_apps","top_apps_count","top_apps_namefunc","e","app","top_apps_colorfunc","top_windowtitles","top_windowtitles_count","top_windowtitles_namefunc","title","top_windowtitles_colorfunc","app_chunks","app_chunkfunc","app_eventfunc","top_web_count","web_duration","web_chunks","web_chunkfunc","domain","web_eventfunc","url","top_web_domains","top_web_domains_namefunc","top_web_domains_colorfunc","top_web_urls","top_web_urls_namefunc","top_web_urls_colorfunc","editor_duration","top_editor_count","top_editor_files","top_editor_files_namefunc","f","file","length","top_editor_files_colorfunc","language","top_editor_languages","top_editor_languages_namefunc","top_editor_languages_colorfunc","top_editor_projects","top_editor_projects_namefunc","project","top_editor_projects_colorfunc","watch","$route","console","log","this","refresh","queryBrowserDomains","queryEditorActivity","computed","readableDuration","time","readableWebDuration","readableEditorDuration","host","params","date","dateParam","dateMoment","start_of_day","localStorage","startOfDay","start_of_day_hours","parseInt","start_of_day_minutes","hour","minute","dateStart","dateEnd","dateShort","windowBucketId","afkBucketId","link_prefix","mounted","getBrowserBucket","getEditorBucket","testError","methods","previousDay","subtract","nextDay","setDate","$router","queryAll","errorHandler","error","eventcount","queryWindows","queryDailyActivity","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","$aw","getBuckets","sent","map_default","filter_default","bucket","stop","apply","arguments","_callee2","_context2","_callee3","periods","q","_context3","queries","query","_callee4","_context4","_callee5","_context5","_callee6","timeperiods","startdate","enddate","_context6","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","_v","_s","attrs","variant","show","staticClass","to","disabled","id","type","max","domProps","value","on","change","$event","target","click","periodusage_arr","dateformat","class","active","directives","rawName","expression","fields","namefunc","colorfunc","size","_e","model","callback","$$v","chunks","total_duration","show_afk","chunkfunc","eventfunc","text","_l","browserBucket","key","editorBucket","staticStyle","padding-top"],"mappings":"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","file":"static/js/5.8209ba2c4c3813c90114.js","sourcesContent":["import moment from 'moment';\n\nexport default {\n    seconds_to_duration(seconds) {\n        var result = \"\";\n        var hrs = Math.floor(seconds/60/60);\n        var min = Math.floor(seconds/60%60);\n        var sec = Math.floor(seconds%60);\n        if (hrs != 0)\n            result += hrs + \"h\";\n        if (hrs != 0 || min != 0)\n            result += min + \"m\";\n        if (hrs == 0)\n            result += sec + \"s\";\n        return result;\n    },\n\n    get_day_start(datestr) {\n      // Get start time of date\n      var datestart = moment(datestr);\n      datestart.set('hour', 0);\n      datestart.set('minute', 0);\n      datestart.set('second', 0);\n      datestart.set('millisecond', 0);\n      return datestart;\n    },\n\n    get_prev_day(datestr){\n      var newdate = moment(datestr).add(-1, 'days');\n      return newdate;\n    },\n\n    get_next_day(datestr){\n      var newdate = moment(datestr).add(1, 'days');\n      return newdate;\n    },\n}\n","import _ from \"lodash\";\n\n// TODO: Sanitize string input of buckets\n\nfunction querystr_to_array(querystr) {\n  return querystr\n    .split(\";\")\n    .filter(l => l)\n    .map(l => l + \";\");\n}\n\nexport function summaryQuery(windowbucket, afkbucket, count) {\n  windowbucket = windowbucket.replace('\"', '\\\\\"');\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n  let code = `events  = flood(query_bucket(\"${windowbucket}\"));\n    not_afk = flood(query_bucket(\"${afkbucket}\"));\n    not_afk = filter_keyvals(not_afk, \"status\", [\"not-afk\"]);\n    events  = filter_period_intersect(events, not_afk);\n    title_events  = merge_events_by_keys(events, [\"app\", \"title\"]);\n    title_events  = sort_by_duration(title_events);\n    app_events  = merge_events_by_keys(title_events, [\"app\"]);\n    app_events  = sort_by_duration(app_events);\n    app_events  = limit_events(app_events, ${count});\n    title_events  = limit_events(title_events, ${count});\n    RETURN  = {\"app_events\": app_events, \"title_events\": title_events};`;\n  return querystr_to_array(code);\n}\n\nexport function windowQuery(\n  windowbucket,\n  afkbucket,\n  appcount,\n  titlecount,\n  filterAFK\n) {\n  windowbucket = windowbucket.replace('\"', '\\\\\"');\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n  let code =\n    `events  = flood(query_bucket(\"${windowbucket}\"));\n     not_afk = flood(query_bucket(\"${afkbucket}\"));\n     not_afk = filter_keyvals(not_afk, \"status\", [\"not-afk\"]);` +\n    (filterAFK ? \"events  = filter_period_intersect(events, not_afk);\" : \"\") +\n    `title_events  = merge_events_by_keys(events, [\"app\", \"title\"]);\n    title_events  = sort_by_duration(title_events);\n    app_events  = merge_events_by_keys(title_events, [\"app\"]);\n    app_events  = sort_by_duration(app_events);\n\n    events = sort_by_timestamp(events);\n    app_chunks = chunk_events_by_key(events, \"app\");\n    app_events  = limit_events(app_events, ${appcount});\n    title_events  = limit_events(title_events, ${titlecount});\n    duration = sum_durations(events);\n    RETURN  = {\"app_events\": app_events, \"title_events\": title_events, \"app_chunks\": app_chunks, \"duration\": duration};`;\n  return querystr_to_array(code);\n}\n\nexport function appQuery(appbucket, limit) {\n  appbucket = appbucket.replace('\"', '\\\\\"');\n  limit = limit || 5;\n  let code =\n    `events  = query_bucket(\"${appbucket}\");` +\n    `events  = merge_events_by_keys(events, [\"app\"]);\n    events  = sort_by_duration(events);\n    events  = limit_events(events, ${limit});\n    total_duration = sum_durations(events);\n    RETURN  = {\"events\": events, \"total_duration\": total_duration};`;\n  return querystr_to_array(code);\n}\n\nconst appnames = {\n  chrome: [\n    \"Google-chrome\",\n    \"chrome.exe\",\n    \"Chromium\",\n    \"Google Chrome\",\n    \"Chromium-browser\",\n    \"Chromium-browser-chromium\",\n    \"Google-chrome-beta\",\n    \"Google-chrome-unstable\"\n  ],\n  firefox: [\n    \"Firefox\",\n    \"Firefox.exe\",\n    \"firefox\",\n    \"firefox.exe\",\n    \"Firefox Developer Edition\",\n    \"Firefox Beta\",\n    \"Nightly\"\n  ],\n  opera: [\"opera.exe\", \"Opera\"],\n  brave: [\"brave.exe\"]\n};\n\nexport function browserSummaryQuery(\n  browserbuckets,\n  windowbucket,\n  afkbucket,\n  limit,\n  filterAFK\n) {\n  // Escape `\"`\n  browserbuckets = _.map(browserbuckets, b => b.replace('\"', '\\\\\"'));\n  windowbucket = windowbucket.replace('\"', '\\\\\"');\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n  limit = limit || 5;\n\n  // If multiple browser buckets were found\n  let code =\n    `events = [];\n     window = flood(query_bucket(\"${windowbucket}\"));` +\n    (filterAFK\n      ? `not_afk = flood(query_bucket(\"${afkbucket}\"));\n     not_afk = filter_keyvals(not_afk, \"status\", [\"not-afk\"]);`\n      : \"\");\n\n  _.each([\"chrome\", \"firefox\", \"opera\", \"brave\"], browserName => {\n    let bucketId = _.filter(\n      browserbuckets,\n      buckets => buckets.indexOf(browserName) !== -1\n    )[0];\n    if (bucketId === undefined) {\n      // Skip browser if specific bucket not available\n      return;\n    }\n    let appnames_str = JSON.stringify(appnames[browserName]);\n    code +=\n      `events_${browserName} = flood(query_bucket(\"${bucketId}\"));\n       window_${browserName} = filter_keyvals(window, \"app\", ${appnames_str});` +\n      (filterAFK\n        ? `window_${browserName} = filter_period_intersect(window_${browserName}, not_afk);`\n        : \"\") +\n      `events_${browserName} = filter_period_intersect(events_${browserName}, window_${browserName});\n       events_${browserName} = split_url_events(events_${browserName});\n       events = sort_by_timestamp(concat(events, events_${browserName}));`;\n  });\n\n  return querystr_to_array(code).concat([\n    'urls = merge_events_by_keys(events, [\"url\"]);',\n    \"urls = sort_by_duration(urls);\",\n    \"urls = limit_events(urls, \" + limit + \");\",\n    \"domains = split_url_events(events);\",\n    'domains = merge_events_by_keys(domains, [\"domain\"]);',\n    \"domains = sort_by_duration(domains);\",\n    \"domains = limit_events(domains, \" + limit + \");\",\n    'chunks = chunk_events_by_key(events, \"domain\");',\n    \"duration = sum_durations(events);\",\n    'RETURN = {\"domains\": domains, \"urls\": urls, \"chunks\": chunks, \"duration\": duration};'\n  ]);\n}\n\nexport function editorActivityQuery(editorbucket, limit) {\n  editorbucket = editorbucket.replace('\"', '\\\\\"');\n  return [\n    'editorbucket = \"' + editorbucket + '\";',\n    \"events = flood(query_bucket(editorbucket));\",\n    'files = sort_by_duration(merge_events_by_keys(events, [\"file\", \"language\"]));',\n    \"files = limit_events(files, \" + limit + \");\",\n    'languages = sort_by_duration(merge_events_by_keys(events, [\"language\"]));',\n    \"languages = limit_events(languages, \" + limit + \");\",\n    'projects = sort_by_duration(merge_events_by_keys(events, [\"project\"]));',\n    \"projects = limit_events(projects, \" + limit + \");\",\n    \"duration = sum_durations(events);\",\n    'RETURN = {\"files\": files, \"languages\": languages, \"projects\": projects, \"duration\": duration};'\n  ];\n}\n\nexport function dailyActivityQuery(afkbucket) {\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n  return [\n    'afkbucket = \"' + afkbucket + '\";',\n    \"not_afk = flood(query_bucket(afkbucket));\",\n    'not_afk = merge_events_by_keys(not_afk, [\"status\"]);',\n    \"RETURN = not_afk;\"\n  ];\n}\n\nexport function dailyActivityQueryAndroid(androidbucket) {\n  androidbucket = androidbucket.replace('\"', '\\\\\"');\n  return [\n    `events = query_bucket(\"${androidbucket}\");`,\n    \"RETURN = sum_durations(events);\"\n  ];\n}\n\nexport default {\n  summaryQuery,\n  windowQuery,\n  browserSummaryQuery,\n  appQuery,\n  dailyActivityQuery,\n  dailyActivityQueryAndroid,\n  editorActivityQuery\n};\n","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDaily.vue?vue&type=style&index=0&lang=scss&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDaily.vue?vue&type=style&index=0&lang=scss&\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDaily.vue?vue&type=style&index=0&lang=scss&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import mod from \"-!../../node_modules/style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDaily.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDaily.vue?vue&type=style&index=0&lang=scss&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".aw-nav-link {\\n  background-color: #eee;\\n  border: 2px solid #eee !important;\\n  border-bottom: none !important;\\n  margin-left: 0.1em;\\n  margin-right: 0.1em;\\n  border-top-left-radius: 0.5rem !important;\\n  border-top-right-radius: 0.5rem !important;\\n}\\n.aw-nav-link:hover {\\n  background-color: #fff;\\n}\\n.aw-nav-item:hover {\\n  background-color: #fff !important;\\n}\\n\", \"\"]);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Daily Activity for \"+_vm._s(_vm.dateShort))]),_c('p',[_vm._v(\"Host: \"+_vm._s(_vm.host)),_c('br'),_vm._v(\"Active time: \"+_vm._s(_vm.readableDuration))]),_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":_vm.errormsg.length > 0}},[_vm._v(_vm._s(_vm.errormsg))]),_c('div',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"p-1\"},[_c('b-button-group',[_c('b-button',{attrs:{\"to\":_vm.link_prefix + '/' + _vm.previousDay(),\"variant\":\"outline-dark\"}},[_c('icon',{attrs:{\"name\":\"arrow-left\"}}),_c('span',{staticClass:\"d-none d-md-inline\"},[_vm._v(\" Previous day\")])],1),_c('b-button',{attrs:{\"to\":_vm.link_prefix + '/' + _vm.nextDay(),\"disabled\":_vm.nextDay() > _vm.today,\"variant\":\"outline-dark\"}},[_c('span',{staticClass:\"d-none d-md-inline\"},[_vm._v(\" Next day\")]),_c('icon',{attrs:{\"name\":\"arrow-right\"}})],1)],1)],1),_c('div',{staticClass:\"p-1\"},[_c('input',{staticClass:\"form-control\",attrs:{\"id\":\"date\",\"type\":\"date\",\"max\":_vm.today},domProps:{\"value\":_vm.dateShort},on:{\"change\":function($event){return _vm.setDate($event.target.value)}}})]),_c('div',{staticClass:\"p-1 ml-auto\"},[_c('b-button-group',[_c('b-button',{attrs:{\"variant\":\"outline-dark\"},on:{\"click\":function($event){return _vm.refresh()}}},[_c('icon',{attrs:{\"name\":\"sync\"}}),_c('span',{staticClass:\"d-none d-md-inline\"},[_vm._v(\" Refresh\")])],1)],1)],1)]),_c('aw-periodusage',{attrs:{\"periodusage_arr\":_vm.daily_activity,\"link_prefix\":_vm.link_prefix,\"dateformat\":\"YYYY-MM-DD\"}}),_c('ul',{staticClass:\"nav nav-tabs my-3\"},[_c('li',{staticClass:\"nav-item aw-nav-item\"},[_c('a',{staticClass:\"nav-link aw-nav-link\",class:{ active: _vm.view=='summary' },on:{\"click\":function($event){_vm.view = 'summary'}}},[_c('h5',[_vm._v(\"Summary\")])])]),_c('li',{staticClass:\"nav-item aw-nav-item\"},[_c('a',{staticClass:\"nav-link aw-nav-link\",class:{ active: _vm.view=='window' },on:{\"click\":function($event){_vm.view = 'window'}}},[_c('h5',[_vm._v(\"Window\")])])]),_c('li',{staticClass:\"nav-item aw-nav-item\"},[_c('a',{staticClass:\"nav-link aw-nav-link\",class:{ active: _vm.view=='browser' },on:{\"click\":function($event){_vm.view = 'browser'}}},[_c('h5',{staticClass:\"active-h5\"},[_vm._v(\"Browser\")])])]),_c('li',{staticClass:\"nav-item aw-nav-item\"},[_c('a',{staticClass:\"nav-link aw-nav-link\",class:{ active: _vm.view=='editor' },on:{\"click\":function($event){_vm.view = 'editor'}}},[_c('h5',[_vm._v(\"Editor\")])])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.view == 'summary'),expression:\"view == 'summary'\"}],staticClass:\"row\"},[_c('div',{staticClass:\"col-md-4\"},[_c('h5',[_vm._v(\"Top Applications\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_apps,\"namefunc\":_vm.top_apps_namefunc,\"colorfunc\":_vm.top_apps_colorfunc}}),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"outline-secondary\",\"disabled\":_vm.top_apps.length < _vm.top_apps_count},on:{\"click\":function($event){_vm.top_apps_count += 5; _vm.queryWindows()}}},[_c('icon',{attrs:{\"name\":\"angle-double-down\"}}),_vm._v(\"Show more\")],1)],1),_c('div',{staticClass:\"col-md-4\"},[_c('h5',[_vm._v(\"Top Window Titles\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_windowtitles,\"namefunc\":_vm.top_windowtitles_namefunc,\"colorfunc\":_vm.top_windowtitles_colorfunc}}),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"outline-secondary\",\"disabled\":_vm.top_windowtitles.length < _vm.top_windowtitles_count},on:{\"click\":function($event){_vm.top_windowtitles_count += 5; _vm.queryWindows()}}},[_c('icon',{attrs:{\"name\":\"angle-double-down\"}}),_vm._v(\"Show more\")],1)],1),_c('div',{staticClass:\"col-md-4\"},[_c('h5',[_vm._v(\"Top Browser Domains\")]),(_vm.browserBuckets)?_c('div',[_c('aw-summary',{attrs:{\"fields\":_vm.top_web_domains,\"namefunc\":_vm.top_web_domains_namefunc,\"colorfunc\":_vm.top_web_domains_colorfunc}}),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"outline-secondary\",\"disabled\":_vm.top_web_domains.length < _vm.top_web_count},on:{\"click\":function($event){_vm.top_web_count += 5; _vm.queryBrowserDomains()}}},[_c('icon',{attrs:{\"name\":\"angle-double-down\"}}),_vm._v(\"Show more\")],1),_c('br')],1):_vm._e()])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.view == 'window'),expression:\"view == 'window'\"}]},[_c('b-form-checkbox',{model:{value:(_vm.timelineShowAFK),callback:function ($$v) {_vm.timelineShowAFK=$$v},expression:\"timelineShowAFK\"}},[_vm._v(\"Show AFK time\")]),_c('aw-timeline-inspect',{attrs:{\"chunks\":_vm.app_chunks,\"total_duration\":_vm.duration,\"show_afk\":_vm.timelineShowAFK,\"chunkfunc\":_vm.app_chunkfunc,\"eventfunc\":_vm.app_eventfunc}}),_c('hr'),_c('aw-sunburst',{attrs:{\"date\":_vm.date,\"afkBucketId\":_vm.afkBucketId,\"windowBucketId\":_vm.windowBucketId}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.view == 'browser'),expression:\"view == 'browser'\"}]},[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-input-group-prepend',[_c('span',{staticClass:\"input-group-text\"},[_vm._v(\"Bucket\")])]),_c('b-dropdown',{attrs:{\"text\":(_vm.browserBucketSelected !== 'all' && _vm.browserBucketSelected) || 'Select browser watcher bucket',\"size\":\"sm\",\"variant\":\"outline-secondary\"}},[_c('b-dropdown-header',[_vm._v(\"Browser bucket to use\")]),(_vm.browserBuckets.length <= 0)?_c('b-dropdown-item',{attrs:{\"name\":\"b\",\"disabled\":\"\"}},[_vm._v(\"No browser buckets available\"),_c('br'),_c('small',[_vm._v(\"Make sure you have an browser extension installed\")])]):_vm._e(),(_vm.browserBuckets.length > 1)?_c('b-dropdown-item-button',{on:{\"click\":function($event){_vm.browserBucketSelected = 'all'}}},[_vm._v(\"All\")]):_vm._e(),_vm._l((_vm.browserBuckets),function(browserBucket){return _c('b-dropdown-item-button',{key:browserBucket,on:{\"click\":function($event){_vm.browserBucketSelected = browserBucket}}},[_vm._v(_vm._s(browserBucket))])})],2)],1),_c('br'),_c('h6',[_vm._v(\"Active browser time: \"+_vm._s(_vm.readableWebDuration))]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6\"},[_c('h5',[_vm._v(\"Top Browser Domains\")]),(_vm.browserBuckets)?_c('div',[_c('aw-summary',{attrs:{\"fields\":_vm.top_web_domains,\"namefunc\":_vm.top_web_domains_namefunc,\"colorfunc\":_vm.top_web_domains_colorfunc}})],1):_vm._e()]),_c('div',{staticClass:\"col-md-6\"},[_c('h5',[_vm._v(\"Top Browser URLs\")]),(_vm.browserBuckets)?_c('div',[_c('aw-summary',{attrs:{\"fields\":_vm.top_web_urls,\"namefunc\":_vm.top_web_urls_namefunc,\"colorfunc\":_vm.top_web_urls_colorfunc}})],1):_vm._e()])]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"outline-secondary\",\"disabled\":_vm.top_web_urls.length < _vm.top_web_count && _vm.top_web_domains.length < _vm.top_web_count},on:{\"click\":function($event){_vm.top_web_count += 5; _vm.queryBrowserDomains()}}},[_c('icon',{attrs:{\"name\":\"angle-double-down\"}}),_vm._v(\"Show more\")],1),_c('hr'),_c('b-form-checkbox',{model:{value:(_vm.timelineShowAFK),callback:function ($$v) {_vm.timelineShowAFK=$$v},expression:\"timelineShowAFK\"}},[_vm._v(\"Show AFK time\")]),_c('br'),_c('aw-timeline-inspect',{attrs:{\"chunks\":_vm.web_chunks,\"total_duration\":_vm.duration,\"show_afk\":_vm.timelineShowAFK,\"chunkfunc\":_vm.web_chunkfunc,\"eventfunc\":_vm.web_eventfunc}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.view == 'editor'),expression:\"view == 'editor'\"}]},[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-input-group-prepend',[_c('span',{staticClass:\"input-group-text\"},[_vm._v(\"Bucket\")])]),_c('b-dropdown',{attrs:{\"text\":_vm.editorBucketId || 'Select editor watcher bucket',\"size\":\"sm\",\"variant\":\"outline-secondary\"}},[_c('b-dropdown-header',[_vm._v(\"Editor bucket to use\")]),(_vm.editorBuckets.length <= 0)?_c('b-dropdown-item',{attrs:{\"name\":\"b\",\"disabled\":\"\"}},[_vm._v(\"No editor buckets available\"),_c('br'),_c('small',[_vm._v(\"Make sure you have an editor watcher installed to use this feature\")])]):_vm._e(),_vm._l((_vm.editorBuckets),function(editorBucket){return _c('b-dropdown-item-button',{key:editorBucket,on:{\"click\":function($event){_vm.editorBucketId = editorBucket}}},[_vm._v(_vm._s(editorBucket))])})],2)],1),_c('br'),_c('h6',[_vm._v(\"Active editor time: \"+_vm._s(_vm.readableEditorDuration))]),(_vm.editorBucketId)?_c('div',[_c('div',{staticClass:\"row\",staticStyle:{\"padding-top\":\"0.5em\"}},[_c('div',{staticClass:\"col-md-4\"},[_c('h5',[_vm._v(\"Top file activity\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_editor_files,\"namefunc\":_vm.top_editor_files_namefunc,\"colorfunc\":_vm.top_editor_files_colorfunc}})],1),_c('div',{staticClass:\"col-md-4\"},[_c('h5',[_vm._v(\"Top language activity\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_editor_languages,\"namefunc\":_vm.top_editor_languages_namefunc,\"colorfunc\":_vm.top_editor_languages_colorfunc}})],1),_c('div',{staticClass:\"col-md-4\"},[_c('h5',[_vm._v(\"Top project activity\")]),_c('aw-summary',{attrs:{\"fields\":_vm.top_editor_projects,\"namefunc\":_vm.top_editor_projects_namefunc,\"colorfunc\":_vm.top_editor_projects_colorfunc}})],1)]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"outline-secondary\"},on:{\"click\":function($event){_vm.top_editor_count += 5; _vm.queryEditorActivity()}}},[_c('icon',{attrs:{\"name\":\"angle-double-down\"}}),_vm._v(\"Show more\")],1)],1):_vm._e()],1),_c('hr'),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6\"},[_c('b',[_vm._v(\"Options\")]),_c('div',[_c('b-form-checkbox',{model:{value:(_vm.filterAFK),callback:function ($$v) {_vm.filterAFK=$$v},expression:\"filterAFK\"}},[_vm._v(\"Filter away AFK time\")])],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\ndiv\n  h2 Daily Activity for {{ dateShort }}\n\n  p\n    | Host: {{ host }}\n    br\n    | Active time: {{ readableDuration }}\n\n  b-alert(variant=\"danger\" :show=\"errormsg.length > 0\")\n    | {{ errormsg }}\n\n  div.d-flex\n    div.p-1\n      b-button-group\n        b-button(:to=\"link_prefix + '/' + previousDay()\", variant=\"outline-dark\")\n          icon(name=\"arrow-left\")\n          span.d-none.d-md-inline\n            |  Previous day\n        b-button(:to=\"link_prefix + '/' + nextDay()\", :disabled=\"nextDay() > today\", variant=\"outline-dark\")\n          span.d-none.d-md-inline\n            |  Next day\n          icon(name=\"arrow-right\")\n    div.p-1\n      input.form-control(id=\"date\" type=\"date\" :value=\"dateShort\" :max=\"today\" @change=\"setDate($event.target.value)\")\n\n    div.p-1.ml-auto\n      b-button-group\n        b-button(@click=\"refresh()\", variant=\"outline-dark\")\n          icon(name=\"sync\")\n          span.d-none.d-md-inline\n            |  Refresh\n\n  aw-periodusage(:periodusage_arr=\"daily_activity\", :link_prefix=\"link_prefix\" dateformat=\"YYYY-MM-DD\")\n\n  ul.nav.nav-tabs.my-3\n    li.nav-item.aw-nav-item\n      a.nav-link.aw-nav-link(@click=\"view = 'summary'\" :class=\"{ active: view=='summary' }\")\n        h5 Summary\n    li.nav-item.aw-nav-item\n      a.nav-link.aw-nav-link(@click=\"view = 'window'\" :class=\"{ active: view=='window' }\")\n        h5 Window\n    li.nav-item.aw-nav-item\n      a.nav-link.aw-nav-link(@click=\"view = 'browser'\" :class=\"{ active: view=='browser' }\")\n        h5.active-h5 Browser\n    li.nav-item.aw-nav-item\n      a.nav-link.aw-nav-link(@click=\"view = 'editor'\" :class=\"{ active: view=='editor' }\")\n        h5 Editor\n\n  div.row(v-show=\"view == 'summary'\")\n    div.col-md-4\n      h5 Top Applications\n      aw-summary(:fields=\"top_apps\", :namefunc=\"top_apps_namefunc\", :colorfunc=\"top_apps_colorfunc\")\n      b-button(size=\"sm\", variant=\"outline-secondary\", :disabled=\"top_apps.length < top_apps_count\", @click=\"top_apps_count += 5; queryWindows()\")\n        icon(name=\"angle-double-down\")\n        | Show more\n\n    div.col-md-4\n      h5 Top Window Titles\n      aw-summary(:fields=\"top_windowtitles\", :namefunc=\"top_windowtitles_namefunc\", :colorfunc=\"top_windowtitles_colorfunc\")\n      b-button(size=\"sm\", variant=\"outline-secondary\", :disabled=\"top_windowtitles.length < top_windowtitles_count\", @click=\"top_windowtitles_count += 5; queryWindows()\")\n        icon(name=\"angle-double-down\")\n        | Show more\n\n    div.col-md-4\n      h5 Top Browser Domains\n      div(v-if=\"browserBuckets\")\n        aw-summary(:fields=\"top_web_domains\", :namefunc=\"top_web_domains_namefunc\", :colorfunc=\"top_web_domains_colorfunc\")\n        b-button(size=\"sm\", variant=\"outline-secondary\", :disabled=\"top_web_domains.length < top_web_count\" @click=\"top_web_count += 5; queryBrowserDomains()\")\n          icon(name=\"angle-double-down\")\n          | Show more\n        br\n\n  div(v-show=\"view == 'window'\")\n\n    b-form-checkbox(v-model=\"timelineShowAFK\")\n      | Show AFK time\n\n    aw-timeline-inspect(:chunks=\"app_chunks\", :total_duration='duration', :show_afk='timelineShowAFK', :chunkfunc='app_chunkfunc', :eventfunc='app_eventfunc')\n\n    hr\n\n    aw-sunburst(:date=\"date\", :afkBucketId=\"afkBucketId\", :windowBucketId=\"windowBucketId\")\n\n  div(v-show=\"view == 'browser'\")\n    b-input-group(size=\"sm\")\n      b-input-group-prepend\n        span.input-group-text\n          | Bucket\n      b-dropdown(:text=\"(browserBucketSelected !== 'all' && browserBucketSelected) || 'Select browser watcher bucket'\", size=\"sm\", variant=\"outline-secondary\")\n        b-dropdown-header\n          | Browser bucket to use\n        b-dropdown-item(v-if=\"browserBuckets.length <= 0\", name=\"b\", disabled)\n          | No browser buckets available\n          br\n          small Make sure you have an browser extension installed\n        b-dropdown-item-button(v-if=\"browserBuckets.length > 1\", @click=\"browserBucketSelected = 'all'\")\n          | All\n        b-dropdown-item-button(v-for=\"browserBucket in browserBuckets\", :key=\"browserBucket\", @click=\"browserBucketSelected = browserBucket\")\n          | {{ browserBucket }}\n    br\n\n    h6 Active browser time: {{ readableWebDuration }}\n\n    div.row\n      div.col-md-6\n        h5 Top Browser Domains\n\n        div(v-if=\"browserBuckets\")\n          aw-summary(:fields=\"top_web_domains\", :namefunc=\"top_web_domains_namefunc\", :colorfunc=\"top_web_domains_colorfunc\")\n\n      div.col-md-6\n        h5 Top Browser URLs\n\n        div(v-if=\"browserBuckets\")\n          aw-summary(:fields=\"top_web_urls\", :namefunc=\"top_web_urls_namefunc\", :colorfunc=\"top_web_urls_colorfunc\")\n\n    b-button(size=\"sm\", variant=\"outline-secondary\", :disabled=\"top_web_urls.length < top_web_count && top_web_domains.length < top_web_count\" @click=\"top_web_count += 5; queryBrowserDomains()\")\n      icon(name=\"angle-double-down\")\n      | Show more\n\n    hr\n\n    b-form-checkbox(v-model=\"timelineShowAFK\")\n      | Show AFK time\n\n    br\n\n    aw-timeline-inspect(:chunks=\"web_chunks\", :total_duration='duration', :show_afk='timelineShowAFK', :chunkfunc='web_chunkfunc', :eventfunc='web_eventfunc')\n\n  div(v-show=\"view == 'editor'\")\n    b-input-group(size=\"sm\")\n      b-input-group-prepend\n        span.input-group-text\n          | Bucket\n      b-dropdown(:text=\"editorBucketId || 'Select editor watcher bucket'\", size=\"sm\", variant=\"outline-secondary\")\n        b-dropdown-header\n          | Editor bucket to use\n        b-dropdown-item(v-if=\"editorBuckets.length <= 0\", name=\"b\", disabled)\n          | No editor buckets available\n          br\n          small Make sure you have an editor watcher installed to use this feature\n        b-dropdown-item-button(v-for=\"editorBucket in editorBuckets\", :key=\"editorBucket\", @click=\"editorBucketId = editorBucket\")\n          | {{ editorBucket }}\n\n    br\n\n    h6 Active editor time: {{ readableEditorDuration }}\n\n    div(v-if=\"editorBucketId\")\n      div.row(style=\"padding-top: 0.5em;\")\n        div.col-md-4\n          h5 Top file activity\n          aw-summary(:fields=\"top_editor_files\", :namefunc=\"top_editor_files_namefunc\", :colorfunc=\"top_editor_files_colorfunc\")\n\n        div.col-md-4\n          h5 Top language activity\n          aw-summary(:fields=\"top_editor_languages\", :namefunc=\"top_editor_languages_namefunc\", :colorfunc=\"top_editor_languages_colorfunc\")\n\n        div.col-md-4\n          h5 Top project activity\n          aw-summary(:fields=\"top_editor_projects\", :namefunc=\"top_editor_projects_namefunc\", :colorfunc=\"top_editor_projects_colorfunc\")\n\n      b-button(size=\"sm\", variant=\"outline-secondary\", @click=\"top_editor_count += 5; queryEditorActivity()\")\n        icon(name=\"angle-double-down\")\n        | Show more\n\n\n  hr\n\n  div.row\n    div.col-md-6\n      b Options\n      div\n        b-form-checkbox(v-model=\"filterAFK\")\n          | Filter away AFK time\n\n\n</template>\n\n<style lang=\"scss\">\n\n.aw-nav-link {\n  background-color: #eee;\n  border: 2px solid #eee !important;\n  border-bottom: none !important;\n  margin-left: 0.1em;\n  margin-right: 0.1em;\n  border-top-left-radius: 0.5rem !important;\n  border-top-right-radius: 0.5rem !important;\n}\n\n.aw-nav-link:hover {\n  background-color: #fff;\n}\n\n.aw-nav-item:hover {\n  background-color: #fff !important;\n}\n\n</style>\n\n<script>\nimport moment from 'moment';\nimport time from \"../util/time.js\";\nimport _ from 'lodash';\n\nimport 'vue-awesome/icons/arrow-left'\nimport 'vue-awesome/icons/arrow-right'\nimport 'vue-awesome/icons/angle-double-down'\nimport 'vue-awesome/icons/sync'\n\nimport query from '../queries.js';\n\n\nexport default {\n  name: \"Activity\",\n  data: () => {\n    return {\n      today: moment().startOf('day').format(\"YYYY-MM-DD\"),\n\n      filterAFK: true,\n      timelineShowAFK: true,\n\n      view: \"summary\",\n\n      // Query variables\n      duration: \"\",\n      errormsg: \"\",\n\n      daily_activity: [],\n      events_apptimeline: [],\n\n      browserBuckets: [],\n      browserBucketSelected: 'all',\n\n      editorBuckets: [],\n      editorBucketId: \"\",\n\n      top_apps: [],\n      top_apps_count: 5,\n      top_apps_namefunc: (e) => e.data.app,\n      top_apps_colorfunc: (e) => e.data.app,\n\n      top_windowtitles: [],\n      top_windowtitles_count: 5,\n      top_windowtitles_namefunc: (e) => e.data.title,\n      top_windowtitles_colorfunc: (e) => e.data.app,\n\n      app_chunks: [],\n      app_chunkfunc: (e) => e.data.app,\n      app_eventfunc: (e) => e.data.title,\n\n      top_web_count: 5,\n      web_duration: 0,\n\n      web_chunks: [],\n      web_chunkfunc: (e) => e.data.domain,\n      web_eventfunc: (e) => e.data.url,\n\n      top_web_domains: [],\n      top_web_domains_namefunc: (e) => e.data.domain,\n      top_web_domains_colorfunc: (e) => e.data.domain,\n\n      top_web_urls: [],\n      top_web_urls_namefunc: (e) => e.data.url,\n      top_web_urls_colorfunc: (e) => e.data.domain,\n\n      editor_duration: 0,\n      top_editor_count: 5,\n\n      top_editor_files: [],\n      top_editor_files_namefunc: (e) => {\n        let f = e.data.file || \"\";\n        f = f.split(\"/\");\n        f = f[f.length-1];\n        return f;\n      },\n      top_editor_files_colorfunc: (e) => e.data.language,\n\n      top_editor_languages: [],\n      top_editor_languages_namefunc: (e) => e.data.language,\n      top_editor_languages_colorfunc: (e) => e.data.language,\n\n      top_editor_projects: [],\n      top_editor_projects_namefunc: (e) => {\n        let f = e.data.project || \"\";\n        f = f.split(\"/\");\n        f = f[f.length-1];\n        return f;\n      },\n      top_editor_projects_colorfunc: (e) => e.data.project,\n    }\n  },\n  watch: {\n    '$route': function() {\n      console.log(\"Route changed\");\n      this.refresh();\n    },\n    filterAFK() {\n      this.refresh();\n    },\n    browserBucketSelected() {\n      this.queryBrowserDomains();\n    },\n    browserBuckets() {\n      this.queryBrowserDomains();\n    },\n    editorBucketId() {\n      this.queryEditorActivity();\n    },\n  },\n\n  computed: {\n    readableDuration: function() { return time.seconds_to_duration(this.duration) },\n    readableWebDuration: function() { return time.seconds_to_duration(this.web_duration) },\n    readableEditorDuration: function() { return time.seconds_to_duration(this.editor_duration) },\n    host: function() { return this.$route.params.host },\n    date: function() {\n      var dateParam = this.$route.params.date;\n      var dateMoment = dateParam ? moment(dateParam) : moment().startOf('day');\n      var start_of_day = localStorage.startOfDay;\n      var start_of_day_hours = parseInt(start_of_day.split(\":\")[0]);\n      var start_of_day_minutes = parseInt(start_of_day.split(\":\")[1]);\n      return dateMoment.hour(start_of_day_hours).minute(start_of_day_minutes).format();\n    },\n    dateStart: function() { return this.date },\n    dateEnd: function() { return moment(this.date).add(1, 'days').format() },\n    dateShort: function() { return moment(this.date).format(\"YYYY-MM-DD\") },\n    windowBucketId: function() { return \"aw-watcher-window_\" + this.host },\n    afkBucketId:    function() { return \"aw-watcher-afk_\"    + this.host },\n    link_prefix:    function() { return \"/activity/daily/\"   + this.host },\n  },\n\n  mounted: function() {\n    this.getBrowserBucket();\n    this.getEditorBucket();\n\n    this.refresh();\n    this.testError();\n  },\n\n  methods: {\n    previousDay: function() { return moment(this.dateStart).subtract(1, 'days').format(\"YYYY-MM-DD\") },\n    nextDay: function() { return moment(this.dateStart).add(1, 'days').format(\"YYYY-MM-DD\") },\n    setDate: function(date) { this.$router.push('/activity/daily/' + this.host + '/' + date); },\n\n    refresh: function() {\n      this.queryAll();\n      this.duration = \"\";\n    },\n\n    errorHandler: function(error) {\n      this.errormsg = \"\" + error + \". See dev console (F12) and/or server logs for more info.\";\n      throw error;\n    },\n\n    queryAll: function() {\n      this.duration = \"\";\n      this.eventcount = 0;\n      this.errormsg = \"\";\n\n      this.queryWindows();\n      this.queryBrowserDomains();\n      this.queryEditorActivity();\n      this.queryDailyActivity();\n    },\n\n    getBrowserBucket: async function() {\n      let buckets = await this.$aw.getBuckets().catch(this.errorHandler);\n      this.browserBuckets = _.map(_.filter(buckets, (bucket) => bucket[\"type\"] === \"web.tab.current\"), (bucket) => bucket[\"id\"]);\n    },\n\n    getEditorBucket: async function() {\n      let buckets = await this.$aw.getBuckets().catch(this.errorHandler);\n      for (var bucket in buckets){\n        if (buckets[bucket][\"type\"] === \"app.editor.activity\"){\n          this.editorBuckets.push(bucket);\n        }\n      }\n      if (this.editorBuckets.length > 0){\n        this.editorBucketId = this.editorBuckets[0]\n      }\n    },\n\n    queryWindows: async function() {\n      var periods = [this.dateStart + \"/\" + this.dateEnd];\n      var q = query.windowQuery(this.windowBucketId, this.afkBucketId, this.top_apps_count, this.top_windowtitles_count, this.filterAFK);\n      let data = await this.$aw.query(periods, q).catch(this.errorHandler);\n      data = data[0];\n      this.top_apps = data[\"app_events\"];\n      this.top_windowtitles = data[\"title_events\"];\n      this.app_chunks = data[\"app_chunks\"];\n      this.duration = data[\"duration\"];\n    },\n\n    queryBrowserDomains: async function() {\n      let browserBuckets = this.browserBucketSelected == 'all' ? this.browserBuckets : [this.browserBucketSelected];\n      if (browserBuckets) {\n        var periods = [this.dateStart + \"/\" + this.dateEnd];\n        var q = query.browserSummaryQuery(browserBuckets, this.windowBucketId, this.afkBucketId, this.top_web_count, this.filterAFK);\n        let data = (await this.$aw.query(periods, q).catch(this.errorHandler))[0];\n        this.web_duration = data[\"duration\"];\n        this.top_web_domains = data[\"domains\"];\n        this.top_web_urls = data[\"urls\"];\n        this.web_chunks = data[\"chunks\"];\n      }\n    },\n\n    queryEditorActivity: async function() {\n      if (this.editorBucketId !== \"\"){\n        var periods = [this.dateStart + \"/\" + this.dateEnd];\n        var q = query.editorActivityQuery(this.editorBucketId, this.top_editor_count);\n        let data = (await this.$aw.query(periods, q).catch(this.errorHandler))[0];\n        this.editor_duration = data[\"duration\"];\n        this.top_editor_files = data[\"files\"];\n        this.top_editor_languages = data[\"languages\"];\n        this.top_editor_projects = data[\"projects\"];\n      }\n    },\n\n    queryDailyActivity: async function() {\n      var timeperiods = [];\n      for (var i=-15; i<=15; i++) {\n        var startdate = moment(this.date).add(i, 'days').format();\n        var enddate = moment(this.date).add(i+1, 'days').format();\n        timeperiods.push(startdate + '/' + enddate);\n      }\n      this.daily_activity = await this.$aw.query(timeperiods, query.dailyActivityQuery(this.afkBucketId)).catch(this.errorHandler);\n    },\n\n    testError() {\n      //throw 'error: some message';\n    }\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDaily.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityDaily.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ActivityDaily.vue?vue&type=template&id=1ab37c58&lang=pug&\"\nimport script from \"./ActivityDaily.vue?vue&type=script&lang=js&\"\nexport * from \"./ActivityDaily.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ActivityDaily.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}