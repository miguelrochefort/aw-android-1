{"version":3,"sources":["webpack:///./src/util/time.js","webpack:///./src/queries.js","webpack:///./src/views/ActivitySummary.vue?0696","webpack:///./src/views/ActivitySummary.vue?f441","webpack:///./src/views/ActivitySummary.vue?26c8","webpack:///./src/views/ActivitySummary.vue?7c31","webpack:///src/views/ActivitySummary.vue","webpack:///./src/views/ActivitySummary.vue?a56d","webpack:///./src/views/ActivitySummary.vue"],"names":["__webpack_require__","r","__webpack_exports__","moment__WEBPACK_IMPORTED_MODULE_0__","moment__WEBPACK_IMPORTED_MODULE_0___default","n","seconds_to_duration","seconds","result","hrs","Math","floor","min","sec","get_day_start","datestr","datestart","moment","set","get_prev_day","add","get_next_day","querystr_to_array","querystr","split","filter","l","map","appnames","chrome","firefox","opera","brave","summaryQuery","windowbucket","afkbucket","count","replace","concat","windowQuery","appcount","titlecount","filterAFK","browserSummaryQuery","browserbuckets","limit","lodash_map__WEBPACK_IMPORTED_MODULE_2___default","b","code","lodash_each__WEBPACK_IMPORTED_MODULE_1___default","browserName","bucketId","lodash_filter__WEBPACK_IMPORTED_MODULE_0___default","buckets","indexOf","undefined","appnames_str","JSON","stringify","appQuery","appbucket","dailyActivityQuery","dailyActivityQueryAndroid","androidbucket","editorActivityQuery","editorbucket","content","module","i","options","hmr","transform","insertInto","locals","exports","_node_modules_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ActivitySummary_vue_vue_type_style_index_0_id_2b31c794_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","push","_queryPeriodActivity","views_ActivitySummaryvue_type_script_lang_js_","name","data","errormsg","duration","periodLength","period_activity","computed","dateformat","this","periodReadable","moment_default","periodStart","format","readableDuration","time","host","$route","params","date","dateParam","startOf","periodEnd","period","periodStartShort","periodEndShort","windowBucketId","afkBucketId","link_prefix","watch","console","log","refresh","mounted","methods","setDate","$router","errorHandler","error","queryPeriodActivity","asyncToGenerator_default","regenerator_default","a","mark","_callee","timeperiods","start","end","wrap","_context","prev","next","$aw","query","queries","sent","length","stop","apply","arguments","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","_v","_s","attrs","variant","show","periodusage_arr","staticClass","class","active","on","click","$event"],"mappings":"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","file":"static/js/6.47f83561061521d2eb19.js","sourcesContent":["import moment from 'moment';\n\nexport default {\n    seconds_to_duration(seconds) {\n        var result = \"\";\n        var hrs = Math.floor(seconds/60/60);\n        var min = Math.floor(seconds/60%60);\n        var sec = Math.floor(seconds%60);\n        if (hrs != 0)\n            result += hrs + \"h\";\n        if (hrs != 0 || min != 0)\n            result += min + \"m\";\n        if (hrs == 0)\n            result += sec + \"s\";\n        return result;\n    },\n\n    get_day_start(datestr) {\n      // Get start time of date\n      var datestart = moment(datestr);\n      datestart.set('hour', 0);\n      datestart.set('minute', 0);\n      datestart.set('second', 0);\n      datestart.set('millisecond', 0);\n      return datestart;\n    },\n\n    get_prev_day(datestr){\n      var newdate = moment(datestr).add(-1, 'days');\n      return newdate;\n    },\n\n    get_next_day(datestr){\n      var newdate = moment(datestr).add(1, 'days');\n      return newdate;\n    },\n}\n","import _ from \"lodash\";\n\n// TODO: Sanitize string input of buckets\n\nfunction querystr_to_array(querystr) {\n  return querystr\n    .split(\";\")\n    .filter(l => l)\n    .map(l => l + \";\");\n}\n\nexport function summaryQuery(windowbucket, afkbucket, count) {\n  windowbucket = windowbucket.replace('\"', '\\\\\"');\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n  let code = `events  = flood(query_bucket(\"${windowbucket}\"));\n    not_afk = flood(query_bucket(\"${afkbucket}\"));\n    not_afk = filter_keyvals(not_afk, \"status\", [\"not-afk\"]);\n    events  = filter_period_intersect(events, not_afk);\n    title_events  = merge_events_by_keys(events, [\"app\", \"title\"]);\n    title_events  = sort_by_duration(title_events);\n    app_events  = merge_events_by_keys(title_events, [\"app\"]);\n    app_events  = sort_by_duration(app_events);\n    app_events  = limit_events(app_events, ${count});\n    title_events  = limit_events(title_events, ${count});\n    RETURN  = {\"app_events\": app_events, \"title_events\": title_events};`;\n  return querystr_to_array(code);\n}\n\nexport function windowQuery(\n  windowbucket,\n  afkbucket,\n  appcount,\n  titlecount,\n  filterAFK\n) {\n  windowbucket = windowbucket.replace('\"', '\\\\\"');\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n  let code =\n    `events  = flood(query_bucket(\"${windowbucket}\"));\n     not_afk = flood(query_bucket(\"${afkbucket}\"));\n     not_afk = filter_keyvals(not_afk, \"status\", [\"not-afk\"]);` +\n    (filterAFK ? \"events  = filter_period_intersect(events, not_afk);\" : \"\") +\n    `title_events  = merge_events_by_keys(events, [\"app\", \"title\"]);\n    title_events  = sort_by_duration(title_events);\n    app_events  = merge_events_by_keys(title_events, [\"app\"]);\n    app_events  = sort_by_duration(app_events);\n\n    events = sort_by_timestamp(events);\n    app_chunks = chunk_events_by_key(events, \"app\");\n    app_events  = limit_events(app_events, ${appcount});\n    title_events  = limit_events(title_events, ${titlecount});\n    duration = sum_durations(events);\n    RETURN  = {\"app_events\": app_events, \"title_events\": title_events, \"app_chunks\": app_chunks, \"duration\": duration};`;\n  return querystr_to_array(code);\n}\n\nexport function appQuery(appbucket, limit) {\n  appbucket = appbucket.replace('\"', '\\\\\"');\n  limit = limit || 5;\n  let code =\n    `events  = query_bucket(\"${appbucket}\");` +\n    `events  = merge_events_by_keys(events, [\"app\"]);\n    events  = sort_by_duration(events);\n    events  = limit_events(events, ${limit});\n    total_duration = sum_durations(events);\n    RETURN  = {\"events\": events, \"total_duration\": total_duration};`;\n  return querystr_to_array(code);\n}\n\nconst appnames = {\n  chrome: [\n    \"Google-chrome\",\n    \"chrome.exe\",\n    \"Chromium\",\n    \"Google Chrome\",\n    \"Chromium-browser\",\n    \"Chromium-browser-chromium\",\n    \"Google-chrome-beta\",\n    \"Google-chrome-unstable\"\n  ],\n  firefox: [\n    \"Firefox\",\n    \"Firefox.exe\",\n    \"firefox\",\n    \"firefox.exe\",\n    \"Firefox Developer Edition\",\n    \"Firefox Beta\",\n    \"Nightly\"\n  ],\n  opera: [\"opera.exe\", \"Opera\"],\n  brave: [\"brave.exe\"]\n};\n\nexport function browserSummaryQuery(\n  browserbuckets,\n  windowbucket,\n  afkbucket,\n  limit,\n  filterAFK\n) {\n  // Escape `\"`\n  browserbuckets = _.map(browserbuckets, b => b.replace('\"', '\\\\\"'));\n  windowbucket = windowbucket.replace('\"', '\\\\\"');\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n  limit = limit || 5;\n\n  // If multiple browser buckets were found\n  let code =\n    `events = [];\n     window = flood(query_bucket(\"${windowbucket}\"));` +\n    (filterAFK\n      ? `not_afk = flood(query_bucket(\"${afkbucket}\"));\n     not_afk = filter_keyvals(not_afk, \"status\", [\"not-afk\"]);`\n      : \"\");\n\n  _.each([\"chrome\", \"firefox\", \"opera\", \"brave\"], browserName => {\n    let bucketId = _.filter(\n      browserbuckets,\n      buckets => buckets.indexOf(browserName) !== -1\n    )[0];\n    if (bucketId === undefined) {\n      // Skip browser if specific bucket not available\n      return;\n    }\n    let appnames_str = JSON.stringify(appnames[browserName]);\n    code +=\n      `events_${browserName} = flood(query_bucket(\"${bucketId}\"));\n       window_${browserName} = filter_keyvals(window, \"app\", ${appnames_str});` +\n      (filterAFK\n        ? `window_${browserName} = filter_period_intersect(window_${browserName}, not_afk);`\n        : \"\") +\n      `events_${browserName} = filter_period_intersect(events_${browserName}, window_${browserName});\n       events_${browserName} = split_url_events(events_${browserName});\n       events = sort_by_timestamp(concat(events, events_${browserName}));`;\n  });\n\n  return querystr_to_array(code).concat([\n    'urls = merge_events_by_keys(events, [\"url\"]);',\n    \"urls = sort_by_duration(urls);\",\n    \"urls = limit_events(urls, \" + limit + \");\",\n    \"domains = split_url_events(events);\",\n    'domains = merge_events_by_keys(domains, [\"domain\"]);',\n    \"domains = sort_by_duration(domains);\",\n    \"domains = limit_events(domains, \" + limit + \");\",\n    'chunks = chunk_events_by_key(events, \"domain\");',\n    \"duration = sum_durations(events);\",\n    'RETURN = {\"domains\": domains, \"urls\": urls, \"chunks\": chunks, \"duration\": duration};'\n  ]);\n}\n\nexport function editorActivityQuery(editorbucket, limit) {\n  editorbucket = editorbucket.replace('\"', '\\\\\"');\n  return [\n    'editorbucket = \"' + editorbucket + '\";',\n    \"events = flood(query_bucket(editorbucket));\",\n    'files = sort_by_duration(merge_events_by_keys(events, [\"file\", \"language\"]));',\n    \"files = limit_events(files, \" + limit + \");\",\n    'languages = sort_by_duration(merge_events_by_keys(events, [\"language\"]));',\n    \"languages = limit_events(languages, \" + limit + \");\",\n    'projects = sort_by_duration(merge_events_by_keys(events, [\"project\"]));',\n    \"projects = limit_events(projects, \" + limit + \");\",\n    \"duration = sum_durations(events);\",\n    'RETURN = {\"files\": files, \"languages\": languages, \"projects\": projects, \"duration\": duration};'\n  ];\n}\n\nexport function dailyActivityQuery(afkbucket) {\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n  return [\n    'afkbucket = \"' + afkbucket + '\";',\n    \"not_afk = flood(query_bucket(afkbucket));\",\n    'not_afk = merge_events_by_keys(not_afk, [\"status\"]);',\n    \"RETURN = not_afk;\"\n  ];\n}\n\nexport function dailyActivityQueryAndroid(androidbucket) {\n  androidbucket = androidbucket.replace('\"', '\\\\\"');\n  return [\n    `events = query_bucket(\"${androidbucket}\");`,\n    \"RETURN = sum_durations(events);\"\n  ];\n}\n\nexport default {\n  summaryQuery,\n  windowQuery,\n  browserSummaryQuery,\n  appQuery,\n  dailyActivityQuery,\n  dailyActivityQueryAndroid,\n  editorActivityQuery\n};\n","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivitySummary.vue?vue&type=style&index=0&id=2b31c794&scoped=true&lang=scss&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivitySummary.vue?vue&type=style&index=0&id=2b31c794&scoped=true&lang=scss&\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivitySummary.vue?vue&type=style&index=0&id=2b31c794&scoped=true&lang=scss&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import mod from \"-!../../node_modules/style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivitySummary.vue?vue&type=style&index=0&id=2b31c794&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivitySummary.vue?vue&type=style&index=0&id=2b31c794&scoped=true&lang=scss&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".aw-nav-link[data-v-2b31c794] {\\n  background-color: #eee;\\n  border: 2px solid #eee !important;\\n  border-bottom: none !important;\\n  margin-left: 0.1em;\\n  margin-right: 0.1em;\\n  border-top-left-radius: 0.5rem !important;\\n  border-top-right-radius: 0.5rem !important;\\n}\\n.aw-nav-link[data-v-2b31c794]:hover {\\n  background-color: #fff;\\n}\\n.aw-nav-item[data-v-2b31c794]:hover {\\n  background-color: #fff !important;\\n}\\n\", \"\"]);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"Summary for \"+_vm._s(_vm.periodReadable))]),_vm._v(_vm._s(_vm.periodStartShort)+\" - \"+_vm._s(_vm.periodEndShort)),_c('br'),_vm._v(\"Active time: \"+_vm._s(_vm.readableDuration)),_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":_vm.errormsg.length > 0}},[_vm._v(_vm._s(_vm.errormsg))]),_c('aw-periodusage',{attrs:{\"periodusage_arr\":_vm.period_activity,\"link_prefix\":_vm.link_prefix,\"dateformat\":_vm.dateformat}}),_c('ul',{staticClass:\"nav nav-tabs my-3\"},[_c('li',{staticClass:\"nav-item aw-nav-item\"},[_c('a',{staticClass:\"nav-link aw-nav-link\",class:{ active: _vm.periodLength == 'week' },on:{\"click\":function($event){_vm.periodLength = 'week'}}},[_c('h5',[_vm._v(\"Weekly\")])])]),_c('li',{staticClass:\"nav-item aw-nav-item\"},[_c('a',{staticClass:\"nav-link aw-nav-link\",class:{ active: _vm.periodLength == 'month' },on:{\"click\":function($event){_vm.periodLength = 'month'}}},[_c('h5',[_vm._v(\"Monthly\")])])]),_c('li',{staticClass:\"nav-item aw-nav-item\"},[_c('a',{staticClass:\"nav-link aw-nav-link\",class:{ active: _vm.periodLength == 'year' },on:{\"click\":function($event){_vm.periodLength = 'year'}}},[_c('h5',[_vm._v(\"Yearly\")])])])]),_c('aw-summaryview',{attrs:{\"period\":_vm.period}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\ndiv\n  h3 Summary for {{ periodReadable }}\n  | {{ periodStartShort }} - {{ periodEndShort }}\n  br\n  | Active time: {{ readableDuration }}\n\n  b-alert(variant=\"danger\" :show=\"errormsg.length > 0\")\n    | {{ errormsg }}\n\n  aw-periodusage(:periodusage_arr=\"period_activity\", :link_prefix=\"link_prefix\" :dateformat=\"dateformat\")\n\n  ul.nav.nav-tabs.my-3\n    li.nav-item.aw-nav-item\n      a.nav-link.aw-nav-link(@click=\"periodLength = 'week'\" :class=\"{ active: periodLength == 'week' }\")\n        h5 Weekly\n    li.nav-item.aw-nav-item\n      a.nav-link.aw-nav-link(@click=\"periodLength = 'month'\" :class=\"{ active: periodLength == 'month' }\")\n        h5 Monthly\n    li.nav-item.aw-nav-item\n      a.nav-link.aw-nav-link(@click=\"periodLength = 'year'\" :class=\"{ active: periodLength == 'year' }\")\n        h5 Yearly\n\n  aw-summaryview(:period=\"period\")\n\n</template>\n\n<style scoped lang=\"scss\">\n.aw-nav-link {\n  background-color: #eee;\n  border: 2px solid #eee !important;\n  border-bottom: none !important;\n  margin-left: 0.1em;\n  margin-right: 0.1em;\n  border-top-left-radius: 0.5rem !important;\n  border-top-right-radius: 0.5rem !important;\n}\n\n.aw-nav-link:hover {\n  background-color: #fff;\n}\n\n.aw-nav-item:hover {\n  background-color: #fff !important;\n}\n</style>\n\n<script>\nimport moment from 'moment';\nimport time from \"../util/time.js\";\nimport query from '../queries.js';\n\nexport default {\n  name: \"ActivitySummary\",\n\n  data: () => {\n    return {\n      errormsg: \"\",\n      duration: 0,\n      periodLength: \"week\",\n      period_activity: [],\n    }\n  },\n\n  computed: {\n    dateformat: function() {\n        if (this.periodLength == \"week\") { return \"YYYY[ W]WW\"; }\n        else if (this.periodLength == \"month\") { return \"YYYY-MM\"; }\n        else if (this.periodLength == \"year\") { return \"YYYY\"; }\n    },\n    periodReadable: function() { return moment(this.periodStart).format(this.dateformat); },\n    readableDuration: function() { return time.seconds_to_duration(this.duration) },\n    host: function() { return this.$route.params.host },\n    date: function() {\n      var dateParam = this.$route.params.date;\n      var dateMoment = dateParam ? moment(dateParam) : moment();\n      return dateMoment.format();\n    },\n    periodStart: function() { return moment(this.date).startOf(this.periodLength).format(); },\n    periodEnd: function() { return moment(this.periodStart).add(1, this.periodLength).format(); },\n    period: function() { return this.periodStart + \"/\" + this.periodEnd },\n    periodStartShort: function () { return moment(this.periodStart).format(\"YYYY-MM-DD\") },\n    periodEndShort: function () { return moment(this.periodEnd).format(\"YYYY-MM-DD\") },\n    windowBucketId: function() { return \"aw-watcher-window_\" + this.host },\n    afkBucketId:    function() { return \"aw-watcher-afk_\"    + this.host },\n    link_prefix:    function() { return \"/activity/summary/\"   + this.host },\n  },\n\n  watch: {\n    '$route': function() {\n      console.log(\"Route changed\");\n      this.refresh();\n    },\n    'periodLength': function() {\n      this.refresh();\n    },\n  },\n\n  mounted() {\n    this.refresh();\n  },\n\n  methods: {\n    setDate: function(date) { this.$router.push(this.link_prefix+'/'+date); },\n\n    errorHandler: function(error) {\n      this.errormsg = \"\" + error + \". See dev console (F12) and/or server logs for more info.\";\n      throw error;\n    },\n\n    refresh: function() {\n      this.queryPeriodActivity();\n    },\n\n    queryPeriodActivity: async function() {\n      var timeperiods = [];\n      for (var i=-8; i<=8; i++) {\n        var start = moment(this.periodStart).add(i, this.periodLength).format();\n        var end = moment(start).add(1, this.periodLength).format();\n        timeperiods.push(start + '/' + end);\n      }\n      this.period_activity = await this.$aw.query(timeperiods, query.dailyActivityQuery(this.afkBucketId)).catch(this.errorHandler);\n      if (this.period_activity[8].length > 0) {\n        this.duration = this.period_activity[8][0].duration;\n      } else {\n        this.duration = 0;\n      }\n    },\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivitySummary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivitySummary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ActivitySummary.vue?vue&type=template&id=2b31c794&scoped=true&lang=pug&\"\nimport script from \"./ActivitySummary.vue?vue&type=script&lang=js&\"\nexport * from \"./ActivitySummary.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ActivitySummary.vue?vue&type=style&index=0&id=2b31c794&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b31c794\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}