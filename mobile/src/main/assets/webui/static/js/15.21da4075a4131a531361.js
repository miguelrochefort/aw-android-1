(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{753:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o);t.default={seconds_to_duration:function(e){var t="",n=Math.floor(e/60/60),o=Math.floor(e/60%60),r=Math.floor(e%60);return 0!=n&&(t+=n+"h"),0==n&&0==o||(t+=o+"m"),0==n&&(t+=r+"s"),t},get_day_start:function(e){var t=r()(e);return t.set("hour",0),t.set("minute",0),t.set("second",0),t.set("millisecond",0),t},get_prev_day:function(e){return r()(e).add(-1,"days")},get_next_day:function(e){return r()(e).add(1,"days")}}},755:function(e,t,n){"use strict";var o=n(715),r=n.n(o),s=n(716),a=n.n(s),i=n(714),u=n.n(i);function _(e){return e.split(";").filter(function(e){return e}).map(function(e){return e+";"})}var c={chrome:["Google-chrome","chrome.exe","Chromium","Google Chrome","Chromium-browser","Chromium-browser-chromium","Google-chrome-beta","Google-chrome-unstable"],firefox:["Firefox","Firefox.exe","firefox","firefox.exe","Firefox Developer Edition","Firefox Beta","Nightly"],opera:["opera.exe","Opera"],brave:["brave.exe"]};t.a={summaryQuery:function(e,t,n){return e=e.replace('"','\\"'),t=t.replace('"','\\"'),_('events  = flood(query_bucket("'.concat(e,'"));\n    not_afk = flood(query_bucket("').concat(t,'"));\n    not_afk = filter_keyvals(not_afk, "status", ["not-afk"]);\n    events  = filter_period_intersect(events, not_afk);\n    title_events  = merge_events_by_keys(events, ["app", "title"]);\n    title_events  = sort_by_duration(title_events);\n    app_events  = merge_events_by_keys(title_events, ["app"]);\n    app_events  = sort_by_duration(app_events);\n    app_events  = limit_events(app_events, ').concat(n,");\n    title_events  = limit_events(title_events, ").concat(n,');\n    RETURN  = {"app_events": app_events, "title_events": title_events};'))},windowQuery:function(e,t,n,o,r){return e=e.replace('"','\\"'),t=t.replace('"','\\"'),_('events  = flood(query_bucket("'.concat(e,'"));\n     not_afk = flood(query_bucket("').concat(t,'"));\n     not_afk = filter_keyvals(not_afk, "status", ["not-afk"]);')+(r?"events  = filter_period_intersect(events, not_afk);":"")+'title_events  = merge_events_by_keys(events, ["app", "title"]);\n    title_events  = sort_by_duration(title_events);\n    app_events  = merge_events_by_keys(title_events, ["app"]);\n    app_events  = sort_by_duration(app_events);\n\n    events = sort_by_timestamp(events);\n    app_chunks = chunk_events_by_key(events, "app");\n    app_events  = limit_events(app_events, '.concat(n,");\n    title_events  = limit_events(title_events, ").concat(o,');\n    duration = sum_durations(events);\n    RETURN  = {"app_events": app_events, "title_events": title_events, "app_chunks": app_chunks, "duration": duration};'))},browserSummaryQuery:function(e,t,n,o,s){e=u()(e,function(e){return e.replace('"','\\"')}),t=t.replace('"','\\"'),n=n.replace('"','\\"'),o=o||5;var i='events = [];\n     window = flood(query_bucket("'.concat(t,'"));')+(s?'not_afk = flood(query_bucket("'.concat(n,'"));\n     not_afk = filter_keyvals(not_afk, "status", ["not-afk"]);'):"");return a()(["chrome","firefox","opera","brave"],function(t){var n=r()(e,function(e){return-1!==e.indexOf(t)})[0];if(void 0!==n){var o=JSON.stringify(c[t]);i+="events_".concat(t,' = flood(query_bucket("').concat(n,'"));\n       window_').concat(t,' = filter_keyvals(window, "app", ').concat(o,");")+(s?"window_".concat(t," = filter_period_intersect(window_").concat(t,", not_afk);"):"")+"events_".concat(t," = filter_period_intersect(events_").concat(t,", window_").concat(t,");\n       events_").concat(t," = split_url_events(events_").concat(t,");\n       events = sort_by_timestamp(concat(events, events_").concat(t,"));")}}),_(i).concat(['urls = merge_events_by_keys(events, ["url"]);',"urls = sort_by_duration(urls);","urls = limit_events(urls, "+o+");","domains = split_url_events(events);",'domains = merge_events_by_keys(domains, ["domain"]);',"domains = sort_by_duration(domains);","domains = limit_events(domains, "+o+");",'chunks = chunk_events_by_key(events, "domain");',"duration = sum_durations(events);",'RETURN = {"domains": domains, "urls": urls, "chunks": chunks, "duration": duration};'])},appQuery:function(e,t){return e=e.replace('"','\\"'),t=t||5,_('events  = query_bucket("'.concat(e,'");')+'events  = merge_events_by_keys(events, ["app"]);\n    events  = sort_by_duration(events);\n    events  = limit_events(events, '.concat(t,');\n    total_duration = sum_durations(events);\n    RETURN  = {"events": events, "total_duration": total_duration};'))},dailyActivityQuery:function(e){return['afkbucket = "'+(e=e.replace('"','\\"'))+'";',"not_afk = flood(query_bucket(afkbucket));",'not_afk = merge_events_by_keys(not_afk, ["status"]);',"RETURN = not_afk;"]},dailyActivityQueryAndroid:function(e){return e=e.replace('"','\\"'),['events = query_bucket("'.concat(e,'");'),"RETURN = sum_durations(events);"]},editorActivityQuery:function(e,t){return['editorbucket = "'+(e=e.replace('"','\\"'))+'";',"events = flood(query_bucket(editorbucket));",'files = sort_by_duration(merge_events_by_keys(events, ["file", "language"]));',"files = limit_events(files, "+t+");",'languages = sort_by_duration(merge_events_by_keys(events, ["language"]));',"languages = limit_events(languages, "+t+");",'projects = sort_by_duration(merge_events_by_keys(events, ["project"]));',"projects = limit_events(projects, "+t+");","duration = sum_durations(events);",'RETURN = {"files": files, "languages": languages, "projects": projects, "duration": duration};']}}},816:function(e,t,n){"use strict";n.r(t);var o,r=n(98),s=n.n(r),a=n(149),i=n.n(a),u=n(746),_=n.n(u),c=(n(0),n(753)),l=n(755),p={name:"SummaryView",props:["period"],data:function(){var e;return e={errormsg:"",top_apps:[],limit:10},_()(e,"top_apps",[]),_()(e,"top_apps_namefunc",function(e){return e.data.app}),_()(e,"top_apps_colorfunc",function(e){return e.data.app}),_()(e,"top_windowtitles",[]),_()(e,"top_windowtitles_namefunc",function(e){return e.data.title}),_()(e,"top_windowtitles_colorfunc",function(e){return e.data.app}),e},computed:{readableDuration:function(){return c.default.seconds_to_duration(this.duration)},host:function(){return this.$route.params.host},windowBucketId:function(){return"aw-watcher-window_"+this.host},afkBucketId:function(){return"aw-watcher-afk_"+this.host}},watch:{period:function(){this.query()}},mounted:function(){this.query()},methods:{errorHandler:function(e){throw this.errormsg=e+". See dev console (F12) and/or server logs for more info.",e},query:(o=i()(s.a.mark(function e(){var t,n,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.period],n=l.a.summaryQuery(this.windowBucketId,this.afkBucketId,this.limit),e.next=4,this.$aw.query(t,n).catch(this.errorHandler);case 4:o=e.sent,console.log(o),o=o[0],console.log(o),this.top_apps=o.app_events,this.top_windowtitles=o.title_events;case 10:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})}},v=n(70),d=Object(v.a)(p,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-alert",{attrs:{variant:"danger",show:e.errormsg.length>0}},[e._v(e._s(e.errormsg))]),n("div",{staticClass:"row"},[n("aw-summary",{staticClass:"col-md-6",attrs:{fields:e.top_apps,namefunc:e.top_apps_namefunc,colorfunc:e.top_apps_colorfunc}}),n("aw-summary",{staticClass:"col-md-6",attrs:{fields:e.top_windowtitles,namefunc:e.top_windowtitles_namefunc,colorfunc:e.top_windowtitles_colorfunc}})],1)],1)},[],!1,null,"70c057a6",null);t.default=d.exports}}]);
//# sourceMappingURL=15.21da4075a4131a531361.js.map