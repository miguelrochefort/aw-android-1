{"version":3,"sources":["webpack:///./src/views/QueryExplorer.vue?846a","webpack:///src/views/QueryExplorer.vue","webpack:///./src/views/QueryExplorer.vue?afc9","webpack:///./src/views/QueryExplorer.vue"],"names":["_query","today","moment_default","startOf","tomorrow","add","views_QueryExplorervue_type_script_lang_js_","name","data","query_code","vis_method","event_type","events","format","error","startdate","enddate","summaryKey","colorfunc","namefunc","computed","eventcount_str","Array","isArray","this","length","mounted","summaryKeyFunc","methods","query","asyncToGenerator_default","regenerator_default","a","mark","_callee","timeperiods","wrap","_context","prev","next","split","map","s","trim","$aw","sent","t0","response","message","stop","apply","arguments","e","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","_v","attrs","href","staticClass","_s","_e","directives","rawName","value","expression","type","max","domProps","on","input","$event","target","composing","staticStyle","font-family","rows","click","padding-left","change","$$selectedVal","prototype","filter","call","options","o","selected","_value","multiple","modifiers","lazy","margin-bottom","placeholder","blur","$forceUpdate","fields","__webpack_exports__"],"mappings":"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","file":"static/js/21.3cadcfd17653f883abf2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"Query Explorer\")]),_vm._v(\"See \"),_c('a',{attrs:{\"href\":\"https://activitywatch.readthedocs.io/en/latest/querying-data.html\"}},[_vm._v(\"the documentation\")]),_vm._v(\" for help on how to write queries.\"),_c('hr'),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('form',[_c('div',{staticClass:\"form-row\"},[_c('div',{staticClass:\"form-group col-md-6\"},[_vm._v(\"Start\"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.startdate),expression:\"startdate\"}],staticClass:\"form-control\",attrs:{\"type\":\"date\",\"max\":_vm.today},domProps:{\"value\":(_vm.startdate)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.startdate=$event.target.value}}})]),_c('div',{staticClass:\"form-group col-md-6\"},[_vm._v(\"End\"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enddate),expression:\"enddate\"}],staticClass:\"form-control\",attrs:{\"type\":\"date\",\"max\":_vm.tomorrow},domProps:{\"value\":(_vm.enddate)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.enddate=$event.target.value}}})])]),_c('div',{staticClass:\"form-group\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query_code),expression:\"query_code\"}],staticClass:\"form-control\",staticStyle:{\"font-family\":\"monospace\"},attrs:{\"rows\":\"4\"},domProps:{\"value\":(_vm.query_code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.query_code=$event.target.value}}})]),_c('div',{staticClass:\"form-inline\"},[_c('div',{staticClass:\"form-group\"},[_c('button',{staticClass:\"btn btn-success\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.query()}}},[_vm._v(\"Query\")])]),_c('span',{staticStyle:{\"padding-left\":\"1em\"}}),_vm._v(_vm._s(_vm.eventcount_str))])]),_c('hr'),_c('div',{staticClass:\"form-group\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.vis_method),expression:\"vis_method\"}],staticClass:\"form-control\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.vis_method=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"eventlist\"}},[_vm._v(\"Event List\")]),_c('option',{attrs:{\"value\":\"timeline\"}},[_vm._v(\"Timeline\")]),_c('option',{attrs:{\"value\":\"summary\"}},[_vm._v(\"Summary\")]),_c('option',{attrs:{\"value\":\"raw\"}},[_vm._v(\"Raw JSON\")])])]),(_vm.vis_method == 'timeline')?_c('div',[_c('aw-timeline',{attrs:{\"type\":\"simple\",\"event_type\":_vm.event_type,\"events\":_vm.events}})],1):_vm._e(),(_vm.vis_method == 'eventlist')?_c('div',[_c('aw-eventlist',{attrs:{\"events\":_vm.events}})],1):_vm._e(),(_vm.vis_method == 'summary')?_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.trim\",value:(_vm.summaryKey),expression:\"summaryKey\",modifiers:{\"lazy\":true,\"trim\":true}}],staticClass:\"form-control\",staticStyle:{\"margin-bottom\":\"1em\"},attrs:{\"type\":\"text\",\"placeholder\":\"data key\"},domProps:{\"value\":(_vm.summaryKey)},on:{\"change\":function($event){_vm.summaryKey=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('aw-summary',{attrs:{\"fields\":_vm.events,\"colorfunc\":_vm.colorfunc,\"namefunc\":_vm.namefunc}})],1):_vm._e(),(_vm.vis_method == 'raw')?_c('div',[_c('pre',[_vm._v(_vm._s(_vm.events))])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n\ndiv\n  h3 Query Explorer\n\n  | See #[a(href=\"https://activitywatch.readthedocs.io/en/latest/querying-data.html\") the documentation] for help on how to write queries.\n\n  hr\n\n  div.alert.alert-danger(v-if=\"error\")\n    | {{error}}\n\n  form\n    div.form-row\n      div.form-group.col-md-6\n        | Start\n        input.form-control(type=\"date\", :max=\"today\", v-model=\"startdate\")\n      div.form-group.col-md-6\n        | End\n        input.form-control(type=\"date\", :max=\"tomorrow\", v-model=\"enddate\")\n\n    div.form-group\n      textarea.form-control(v-model=\"query_code\", style=\"font-family: monospace\" rows=4)\n    div.form-inline\n      div.form-group\n        button.btn.btn-success(type=\"button\", @click=\"query()\") Query\n      span(style=\"padding-left: 1em;\")\n      | {{eventcount_str}}\n\n  hr\n\n  div.form-group\n    select.form-control(v-model=\"vis_method\")\n      option(value=\"eventlist\") Event List\n      option(value=\"timeline\") Timeline\n      option(value=\"summary\") Summary\n      option(value=\"raw\") Raw JSON\n\n  div(v-if=\"vis_method == 'timeline'\")\n    aw-timeline(type=\"simple\", :event_type=\"event_type\", :events=\"events\")\n  div(v-if=\"vis_method == 'eventlist'\")\n    aw-eventlist(:events=\"events\")\n  div(v-if=\"vis_method == 'summary'\")\n    input.form-control(type=\"text\" v-model.lazy.trim=\"summaryKey\" placeholder=\"data key\" style=\"margin-bottom: 1em;\")\n    aw-summary(:fields=\"events\", :colorfunc=\"colorfunc\", :namefunc=\"namefunc\")\n  div(v-if=\"vis_method == 'raw'\")\n    pre {{ events }}\n\n</template>\n\n<style scoped lang=\"scss\">\n</style>\n\n<script>\nimport moment from 'moment';\n\nlet today = moment().startOf(\"day\");\nlet tomorrow = moment(today).add(24, \"hours\");\n\nexport default {\n  name: \"QueryExplorer\",\n  data() {\n    return {\n      query_code: `afk_events = query_bucket(find_bucket('aw-watcher-afk_'));\nwindow_events = query_bucket(find_bucket('aw-watcher-window_'));\nwindow_events = filter_period_intersect(window_events, filter_keyvals(afk_events, 'status', ['not-afk']));\nRETURN = merge_events_by_keys(window_events, ['app', 'title']);`,\n      \"vis_method\": \"eventlist\",\n      \"event_type\": \"currentwindow\",\n      \"events\": [],\n      \"today\": today.format(),\n      \"tomorrow\": tomorrow.format(),\n      \"error\": \"\",\n      \"startdate\": today.format(\"YYYY-MM-DD\"),\n      \"enddate\": tomorrow.format(\"YYYY-MM-DD\"),\n\n      /* Summary props */\n      \"summaryKey\": \"\",\n      \"colorfunc\": null,\n      \"namefunc\": null,\n    }\n  },\n  computed: {\n    eventcount_str: function(){\n      if (Array.isArray(this.events))\n        return \"Number of events: \" + this.events.length;\n      else\n        return \"\";\n    },\n  },\n  mounted: function() {\n    this.colorfunc = this.summaryKeyFunc;\n    this.namefunc = this.summaryKeyFunc;\n  },\n  methods: {\n    query: async function() {\n      let query = this.query_code.split(\";\").map((s) => s.trim() + \";\");\n      let timeperiods = [moment(this.startdate).format() + \"/\" + moment(this.enddate).format()];\n      try {\n        let data = await this.$aw.query(timeperiods, query);\n        this.events = data[0];\n        this.error = \"\";\n      } catch(e) {\n        this.error = e.response.data.message;\n      }\n    },\n    summaryKeyFunc: function(e) {\n      return e.data[this.summaryKey];\n    },\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryExplorer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryExplorer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QueryExplorer.vue?vue&type=template&id=3c158ba0&scoped=true&lang=pug&\"\nimport script from \"./QueryExplorer.vue?vue&type=script&lang=js&\"\nexport * from \"./QueryExplorer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c158ba0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}