(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{770:function(t,e,n){var i=n(801);"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(360)(i,a);i.locals&&(t.exports=i.locals)},771:function(t,e,n){var i=n(803);"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(360)(i,a);i.locals&&(t.exports=i.locals)},800:function(t,e,n){"use strict";var i=n(770);n.n(i).a},801:function(t,e,n){(t.exports=n(359)(!1)).push([t.i,"#root[data-v-695f388f]:hover {\n  background-color: #EEE;\n}\n",""])},802:function(t,e,n){"use strict";var i=n(771);n.n(i).a},803:function(t,e,n){(t.exports=n(359)(!1)).push([t.i,".btn[data-v-d9ce7aec] {\n  margin-right: 0.5em;\n}\n.btn .fa-icon[data-v-d9ce7aec] {\n    margin-left: 0;\n    margin-right: 0.5em;\n}\n",""])},804:function(t,e,n){"use strict";n.r(e);var i,a,r,s,o,c,u=n(98),d=n.n(u),l=n(149),v=n.n(l),m=n(715),p=n.n(m),h=n(0),f=n.n(h),_=(n(751),n(752),n(725),n(719),{name:"EventEditor",props:{event:Object,bucket_id:String},data:function(){return{editedEvent:JSON.parse(JSON.stringify(this.event))}},methods:{save:(i=v()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.event.data=this.editedEvent.data,t.next=3,this.$aw.replaceEvent(this.bucket_id,this.event);case 3:this.$emit("save");case 4:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})}}),b=n(70),w={name:"StopwatchEntry",components:{"event-editor":Object(b.a)(_,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{staticStyle:{width:"100%"}},[n("tr",[n("th",[t._v("Bucket")]),n("td",[t._v(t._s(t.bucket_id))])]),n("tr",[n("th",[t._v("ID")]),n("td",[t._v(t._s(t.event.id))])]),n("tr",[n("th",[t._v("Start")]),n("td",[t._v(t._s(t._f("iso8601")(t.event.timestamp)))])]),n("tr",[n("th",[t._v("End")]),n("td",[t._v(t._s(t._f("iso8601")(1*t.event.timestamp+1e3*t.event.duration)))])]),n("tr",[n("th",[t._v("Duration")]),n("td",[t._v(t._s(t._f("friendlyduration")(t.event.duration)))])])]),n("hr"),n("table",{staticStyle:{width:"100%"}},[t._m(0),t._l(t.event.data,function(e,i){return n("tr",[n("td",[n("b-input",{attrs:{disabled:"",value:i,size:"sm"}})],1),n("td",[typeof t.event.data[i]==typeof!0?n("b-checkbox",{staticStyle:{margin:"0.25em"},model:{value:t.editedEvent.data[i],callback:function(e){t.$set(t.editedEvent.data,i,e)},expression:"editedEvent.data[k]"}}):t._e(),"string"==typeof t.event.data[i]?n("b-input",{attrs:{size:"sm"},model:{value:t.editedEvent.data[i],callback:function(e){t.$set(t.editedEvent.data,i,e)},expression:"editedEvent.data[k]"}}):t._e()],1)])})],2),n("hr"),n("div",{staticClass:"float-right"},[n("b-button",{staticClass:"mx-1",on:{click:function(e){return t.$emit("cancel")}}},[t._v("Cancel")]),n("b-button",{staticClass:"mx-1",attrs:{variant:"primary"},on:{click:function(e){return t.save()}}},[t._v("Save")])],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("Key")]),e("th",[this._v("Value")])])}],!1,null,null,null).exports},props:{event:Object,bucket_id:String,now:{default:f()()}},methods:{stop:(r=v()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.event.data.running=!1,this.event.duration=(f()()-f()(this.event.timestamp))/1e3,t.next=4,this.$aw.replaceEvent(this.bucket_id,this.event);case 4:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)}),delete_:(a=v()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$aw.deleteEvent(this.bucket_id,this.event.id);case 2:this.$emit("delete");case 3:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})}},k=(n(800),{name:"Stopwatch",components:{"stopwatch-entry":Object(b.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row p-3",attrs:{id:"root"}},[n("div",{staticClass:"flex-fill"},[n("div",[n("b",[t._v(t._s(t.event.data.label||"No label"))])]),n("div",[t._v("Started "),n("span",{attrs:{title:t.event.timestamp}},[t._v(t._s(t._f("friendlytime")(t.event.timestamp)))]),t._v(" ("+t._s(t._f("friendlyduration")(t.event.data.running?(t.now-t.event.timestamp)/1e3:t.event.duration))+")")])]),n("div",[t.event.data.running?n("b-button",{staticClass:"mx-1",attrs:{variant:"outline-primary",size:"sm"},on:{click:t.stop}},[n("icon",{staticClass:"ml-0 mr-1",attrs:{name:"stop"}}),t._v("Stop")],1):t._e(),t.event.data.running?t._e():n("b-button",{staticClass:"mx-1",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(e){return t.$emit("new")}}},[n("icon",{staticClass:"ml-0 mr-1",attrs:{name:"play"}}),t._v("Start new")],1),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit-modal-"+t.event.id,expression:"'edit-modal-' + event.id"}],staticClass:"mx-1",attrs:{variant:"outline-dark",size:"sm"}},[n("icon",{staticClass:"ml-0 mr-1",attrs:{name:"edit"}}),t._v("Edit")],1),n("b-button",{staticClass:"mx-1",attrs:{variant:"outline-danger",size:"sm"},on:{click:t.delete_}},[n("icon",{staticClass:"mx-0",attrs:{name:"trash"}})],1)],1)]),n("b-modal",{ref:"editEventRef",attrs:{id:"edit-modal-"+t.event.id,title:"Edit event",centered:"","hide-footer":""}},[n("event-editor",{attrs:{event:t.event,bucket_id:t.bucket_id},on:{save:function(e){return t.$refs.editEventRef.hide()},cancel:function(e){return t.$refs.editEventRef.hide()}}})],1)],1)},[],!1,null,"695f388f",null).exports},mounted:function(){var t=this;this.$aw.ensureBucket(this.bucket_id,"general.stopwatch","unknown"),this.getEvents(),setInterval(function(){return t.now=f()()},1e3)},data:function(){return{bucket_id:"aw-stopwatch",events:[],label:"",now:f()()}},computed:{runningTimers:function(){return p()(this.events,function(t){return t.data.running})},stoppedTimers:function(){return p()(this.events,function(t){return!t.data.running})}},methods:{startTimer:(c=v()(d.a.mark(function t(e){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.events,t.next=3,this.$aw.heartbeat(this.bucket_id,0,{timestamp:new Date,data:{running:!0,label:e}});case 3:t.t1=t.sent,t.t0.unshift.call(t.t0,t.t1);case 5:case"end":return t.stop()}},t,this)})),function(t){return c.apply(this,arguments)}),deleteTimer:(o=v()(d.a.mark(function t(e){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.events=p()(this.events,function(t){return t.id!=e.id});case 1:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)}),getEvents:(s=v()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$aw.getEvents(this.bucket_id,{limit:100});case 2:this.events=t.sent;case 3:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)})}}),g=(n(802),Object(b.a)(k,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("Stopwatch")]),n("p",[t._v("Using bucket: "+t._s(t.bucket_id))]),n("b-alert",{attrs:{show:""}},[t._v("This is an early experiment, an important missing feature is the ability to set start/end times manually.")]),n("b-input-group",{attrs:{size:"lg"}},[n("b-input",{attrs:{placeholder:"What are you working on?"},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.startTimer(t.label)}}},[n("icon",{attrs:{name:"play"}}),t._v("Start")],1)],1)],1),n("hr"),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("h3",[t._v("Running")]),t.runningTimers.length>0?n("div",t._l(t.runningTimers,function(e){return n("div",[n("stopwatch-entry",{attrs:{event:e,bucket_id:t.bucket_id,now:t.now},on:{delete:function(n){return t.deleteTimer(e)}}}),n("hr",{staticStyle:{margin:"0"}})],1)}),0):n("div",[n("span",{staticStyle:{color:"#555"}},[t._v("No stopwatch running")])])]),n("div",{staticClass:"col-md-6"},[n("h3",[t._v("Stopped")]),t._l(t.stoppedTimers,function(e){return n("div",[n("stopwatch-entry",{attrs:{event:e,bucket_id:t.bucket_id,now:t.now},on:{delete:function(n){return t.deleteTimer(e)},new:function(n){return t.startTimer(e.data.label)}}}),n("hr",{staticStyle:{margin:"0"}})],1)})],2)])],1)},[],!1,null,"d9ce7aec",null));e.default=g.exports}}]);
//# sourceMappingURL=3.9a42d9640ed6197b7a64.js.map