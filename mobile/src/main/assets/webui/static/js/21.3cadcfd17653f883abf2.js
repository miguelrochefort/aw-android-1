(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{821:function(t,e,r){"use strict";r.r(e);var a,n=r(98),s=r.n(n),o=r(149),i=r.n(o),u=r(0),m=r.n(u),c=m()().startOf("day"),l=m()(c).add(24,"hours"),d={name:"QueryExplorer",data:function(){return{query_code:"afk_events = query_bucket(find_bucket('aw-watcher-afk_'));\nwindow_events = query_bucket(find_bucket('aw-watcher-window_'));\nwindow_events = filter_period_intersect(window_events, filter_keyvals(afk_events, 'status', ['not-afk']));\nRETURN = merge_events_by_keys(window_events, ['app', 'title']);",vis_method:"eventlist",event_type:"currentwindow",events:[],today:c.format(),tomorrow:l.format(),error:"",startdate:c.format("YYYY-MM-DD"),enddate:l.format("YYYY-MM-DD"),summaryKey:"",colorfunc:null,namefunc:null}},computed:{eventcount_str:function(){return Array.isArray(this.events)?"Number of events: "+this.events.length:""}},mounted:function(){this.colorfunc=this.summaryKeyFunc,this.namefunc=this.summaryKeyFunc},methods:{query:(a=i()(s.a.mark(function t(){var e,r,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.query_code.split(";").map(function(t){return t.trim()+";"}),r=[m()(this.startdate).format()+"/"+m()(this.enddate).format()],t.prev=2,t.next=5,this.$aw.query(r,e);case 5:a=t.sent,this.events=a[0],this.error="",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),this.error=t.t0.response.data.message;case 13:case"end":return t.stop()}},t,this,[[2,10]])})),function(){return a.apply(this,arguments)}),summaryKeyFunc:function(t){return t.data[this.summaryKey]}}},v=r(70),p=Object(v.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",[t._v("Query Explorer")]),t._v("See "),r("a",{attrs:{href:"https://activitywatch.readthedocs.io/en/latest/querying-data.html"}},[t._v("the documentation")]),t._v(" for help on how to write queries."),r("hr"),t.error?r("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]):t._e(),r("form",[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[t._v("Start"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.startdate,expression:"startdate"}],staticClass:"form-control",attrs:{type:"date",max:t.today},domProps:{value:t.startdate},on:{input:function(e){e.target.composing||(t.startdate=e.target.value)}}})]),r("div",{staticClass:"form-group col-md-6"},[t._v("End"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.enddate,expression:"enddate"}],staticClass:"form-control",attrs:{type:"date",max:t.tomorrow},domProps:{value:t.enddate},on:{input:function(e){e.target.composing||(t.enddate=e.target.value)}}})])]),r("div",{staticClass:"form-group"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.query_code,expression:"query_code"}],staticClass:"form-control",staticStyle:{"font-family":"monospace"},attrs:{rows:"4"},domProps:{value:t.query_code},on:{input:function(e){e.target.composing||(t.query_code=e.target.value)}}})]),r("div",{staticClass:"form-inline"},[r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.query()}}},[t._v("Query")])]),r("span",{staticStyle:{"padding-left":"1em"}}),t._v(t._s(t.eventcount_str))])]),r("hr"),r("div",{staticClass:"form-group"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.vis_method,expression:"vis_method"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.vis_method=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"eventlist"}},[t._v("Event List")]),r("option",{attrs:{value:"timeline"}},[t._v("Timeline")]),r("option",{attrs:{value:"summary"}},[t._v("Summary")]),r("option",{attrs:{value:"raw"}},[t._v("Raw JSON")])])]),"timeline"==t.vis_method?r("div",[r("aw-timeline",{attrs:{type:"simple",event_type:t.event_type,events:t.events}})],1):t._e(),"eventlist"==t.vis_method?r("div",[r("aw-eventlist",{attrs:{events:t.events}})],1):t._e(),"summary"==t.vis_method?r("div",[r("input",{directives:[{name:"model",rawName:"v-model.lazy.trim",value:t.summaryKey,expression:"summaryKey",modifiers:{lazy:!0,trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"1em"},attrs:{type:"text",placeholder:"data key"},domProps:{value:t.summaryKey},on:{change:function(e){t.summaryKey=e.target.value.trim()},blur:function(e){return t.$forceUpdate()}}}),r("aw-summary",{attrs:{fields:t.events,colorfunc:t.colorfunc,namefunc:t.namefunc}})],1):t._e(),"raw"==t.vis_method?r("div",[r("pre",[t._v(t._s(t.events))])]):t._e()])},[],!1,null,"3c158ba0",null);e.default=p.exports}}]);
//# sourceMappingURL=21.3cadcfd17653f883abf2.js.map