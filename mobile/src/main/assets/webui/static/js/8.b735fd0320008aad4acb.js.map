{"version":3,"sources":["webpack:///./src/util/time.js","webpack:///./src/util/color.js","webpack:///./src/visualizations/Sunburst.vue?6a8d","webpack:///./src/visualizations/Sunburst.vue?4f69","webpack:///./src/visualizations/Sunburst.vue?c66b","webpack:///./src/visualizations/Sunburst.vue?9663","webpack:///./src/visualizations/sunburst.js","webpack:///./src/visualizations/Sunburst.vue?d72e","webpack:///src/visualizations/Sunburst.vue","webpack:///./src/visualizations/Sunburst.vue"],"names":["__webpack_require__","r","__webpack_exports__","moment__WEBPACK_IMPORTED_MODULE_0__","moment__WEBPACK_IMPORTED_MODULE_0___default","n","seconds_to_duration","seconds","result","hrs","Math","floor","min","sec","get_day_start","datestr","datestart","moment","set","get_prev_day","add","get_next_day","d","getColorFromString","getTitleAttr","lodash_last__WEBPACK_IMPORTED_MODULE_0__","lodash_last__WEBPACK_IMPORTED_MODULE_0___default","Color","require","scale","scaleOrdinal","domain","customColors","afk","not-afk","hibernating","google-chrome","chromium","firefox","spotify","alacritty","vue","python","javascript","localhost","github.com","stackoverflow.com","lighten","google.com","google.se","messenger.com","facebook.com","appname","toLowerCase","abs","str","hash","length","i","charCodeAt","hashcode","bucket","e","type","data","app","status","startsWith","file","split","title","URL","url","hostname","replace","err","content","module","options","hmr","transform","insertInto","undefined","locals","exports","_node_modules_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_Sunburst_vue_vue_type_style_index_0_id_d0f05cca_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","push","rootEl","vis","partition","arc","d3","color","width","height","radius","legendData","drawClock","h","m","text","a","PI","xn","cos","yn","sin","append","attr","style","drawClockTick","hours","format","mouseclick","console","log","mouseover","hoverEl","select","timestamp","durationString","time","duration","showInfo","sequenceArray","ancestors","reverse","shift","selectAll","filter","node","indexOf","mouseleave","on","transition","this","sunburst","create","el","li","g","remove","w","s","keys","entries","enter","value","key","size","startAngle","x0","endAngle","x1","innerRadius","sqrt","y0","outerRadius","y1","update","json","querySelector","innerHTML","root","hierarchy","nodes","root_start","root_end","startOf","clone","endOf","now","hour","minute","each","loc_start_sec","diff","loc_end_sec","loc_start","max","loc_end","descendants","depth","visualizations_Sunburstvue_type_script_lang_js_","name","props","mounted","$el","starttime","moment_default","date","endtime","visualize","centerMsg","watch","to","methods","todaysEvents","bucket_id","$aw","getEvents","limit","start","end","_this","afkBucketId","then","events_afk","windowBucketId","events_window","parents","children","sortBy_default","i_child","i_parent","p","p_start","p_end","e_start","e_end","before_parent","isBefore","within_parent","isAfter","after_parent","concat_default","warn","m_start","first_default","tail_default","buildHierarchy","component","Object","componentNormalizer","_h","$createElement","_c","_self","staticClass","_m","_v","_s","staticStyle","visibility","text-overflow","white-space","overflow"],"mappings":"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","file":"static/js/8.b735fd0320008aad4acb.js","sourcesContent":["import moment from 'moment';\n\nexport default {\n    seconds_to_duration(seconds) {\n        var result = \"\";\n        var hrs = Math.floor(seconds/60/60);\n        var min = Math.floor(seconds/60%60);\n        var sec = Math.floor(seconds%60);\n        if (hrs != 0)\n            result += hrs + \"h\";\n        if (hrs != 0 || min != 0)\n            result += min + \"m\";\n        if (hrs == 0)\n            result += sec + \"s\";\n        return result;\n    },\n\n    get_day_start(datestr) {\n      // Get start time of date\n      var datestart = moment(datestr);\n      datestart.set('hour', 0);\n      datestart.set('minute', 0);\n      datestart.set('second', 0);\n      datestart.set('millisecond', 0);\n      return datestart;\n    },\n\n    get_prev_day(datestr){\n      var newdate = moment(datestr).add(-1, 'days');\n      return newdate;\n    },\n\n    get_next_day(datestr){\n      var newdate = moment(datestr).add(1, 'days');\n      return newdate;\n    },\n}\n","'use strict';\n\nimport _ from 'lodash';\nconst Color = require('color');\nconst d3 = require(\"d3\");\n\n\n// See here for examples:\n//   https://bl.ocks.org/pstuffa/3393ff2711a53975040077b7453781a9\n\nlet scale = d3.scaleOrdinal(['#90CAF9', '#FFE082', '#EF9A9A', '#A5D6A7']);\n\n// Needed to prewarm the color table\nscale.domain([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]);\n\nlet customColors = {\n    \"afk\": \"#EEE\",\n    \"not-afk\": \"#7F6\",\n    \"hibernating\": \"#DD6\",\n\n    \"google-chrome\": \"#6AA7FE\",   // Google Blue: \"#4885ed\"\n    \"chromium\": \"#8CF\", // Google Blue: \"#4885ed\"\n    \"firefox\": \"#F94\", // Firefox Orange: \"#E55B0A\"\n    \"spotify\": \"#5FA\",  // Spotify Green: \"#1ED760\"\n    \"alacritty\": \"#FD8\",\n\n    \"vue\": \"#5d9\", // Vue teal #4fc08d\n    \"python\": \"#369\", // Python blue #2b5b84\n    \"javascript\": \"#f6b\", // JavaScript pink #eb47a5\n\n    // Developer domains\n    \"localhost\": \"#CCC\",\n    \"github.com\": \"#EBF\",\n    \"stackoverflow.com\": Color(\"#F48024\").lighten(0.3),\n\n    \"google.com\": \"#0AF\",\n    \"google.se\": \"#0AF\",\n\n    // Social media sites\n    \"messenger.com\": Color(\"#3b5998\").lighten(0.5),\n    \"facebook.com\": Color(\"#3b5998\").lighten(0.5),\n};\n\nfunction hashcode(str){\n    let hash = 0;\n    if (str.length === 0) {\n      return hash;\n    }\n    for (var i = 0; i < str.length; i++) {\n        var character = str.charCodeAt(i);\n        hash = ((hash<<5)-hash)+character;\n        hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n}\n\nexport function getColorFromString(appname) {\n    appname = appname || \"\";\n    appname = appname.toLowerCase();\n    return customColors[appname] || scale(Math.abs(hashcode(appname) % 20));\n}\n\nexport function getTitleAttr(bucket, e) {\n  if(bucket.type == \"currentwindow\") {\n    return e.data.app;\n  } else if(bucket.type == \"web.tab.current\") {\n    try {\n      return (new URL(e.data.url)).hostname.replace(\"www.\", \"\");\n    } catch(err) {\n      return e.data.url;\n    }\n  } else if(bucket.type == \"afkstatus\") {\n    return e.data.status;\n  } else if(bucket.type.startsWith(\"app.editor\")) {\n    return _.last(e.data.file.split(\"/\"));\n  } else {\n    return e.data.title;\n  }\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sunburst.vue?vue&type=style&index=0&id=d0f05cca&scoped=true&lang=scss&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sunburst.vue?vue&type=style&index=0&id=d0f05cca&scoped=true&lang=scss&\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sunburst.vue?vue&type=style&index=0&id=d0f05cca&scoped=true&lang=scss&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import mod from \"-!../../node_modules/style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sunburst.vue?vue&type=style&index=0&id=d0f05cca&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sunburst.vue?vue&type=style&index=0&id=d0f05cca&scoped=true&lang=scss&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".sunburst[data-v-d0f05cca] {\\n  font-family: 'Open Sans', sans-serif;\\n  font-size: 12px;\\n  font-weight: 400;\\n  width: 100%;\\n  height: 620px;\\n  margin-top: 10px;\\n}\\n.sunburst .main[data-v-d0f05cca] {\\n    width: 750px;\\n    margin-right: auto;\\n    margin-left: auto;\\n}\\n.sunburst .sidebar[data-v-d0f05cca] {\\n    float: right;\\n    height: 0;\\n    width: 100px;\\n}\\n.sunburst .sequence[data-v-d0f05cca] {\\n    width: 600px;\\n    height: 70px;\\n}\\n.sunburst .legend[data-v-d0f05cca] {\\n    padding: 10px 0 0 3px;\\n}\\n.sunburst .sequence text[data-v-d0f05cca], .sunburst .legend text[data-v-d0f05cca] {\\n    font-weight: 600;\\n    fill: #fff;\\n}\\n.sunburst .chart[data-v-d0f05cca] {\\n    position: relative;\\n}\\n.sunburst .chart path[data-v-d0f05cca] {\\n    stroke: #fff;\\n}\\n.sunburst .explanation[data-v-d0f05cca] {\\n    position: absolute;\\n    top: 260px;\\n    left: 305px;\\n    width: 140px;\\n    text-align: center;\\n    color: #666;\\n    z-index: 10;\\n}\\n.sunburst .explanation .base[data-v-d0f05cca] {\\n      color: #DDD;\\n      font-size: 2em;\\n}\\n.sunburst .explanation .hover .date[data-v-d0f05cca] {\\n      font-size: 0.8em;\\n}\\n.sunburst .explanation .hover .time[data-v-d0f05cca] {\\n      font-size: 1em;\\n}\\n.sunburst .explanation .hover .title[data-v-d0f05cca] {\\n      font-size: 2em;\\n      font-weight: bold;\\n}\\n.sunburst .explanation .hover .duration[data-v-d0f05cca] {\\n      font-size: 1em;\\n}\\n.sunburst .explanation .hover .data[data-v-d0f05cca] {\\n      font-size: 1em;\\n}\\n\", \"\"]);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sunburst\"},[_vm._m(0),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"chart\"},[_c('div',{staticClass:\"explanation\"},[_c('div',{staticClass:\"base\"},[_vm._v(_vm._s(_vm.centerMsg))]),_vm._m(1)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sidebar\"},[_c('div',{staticClass:\"legend\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hover\",staticStyle:{\"visibility\":\"hidden\"}},[_c('div',{staticClass:\"date\"}),_c('div',{staticClass:\"title\"}),_c('div',{staticClass:\"time\"}),_c('div',{staticClass:\"duration\"}),_c('div',{staticClass:\"data\",staticStyle:{\"text-overflow\":\"ellipsis\",\"white-space\":\"nowrap\",\"overflow\":\"hidden\"}})])}]\n\nexport { render, staticRenderFns }","// Original source: https://bl.ocks.org/kerryrodden/7090426\n//\n// Copyright 2013 Google Inc. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nconst d3 = require(\"d3\");\nconst moment = require(\"moment\");\n\nimport time from \"../util/time.js\";\nconst color = require(\"../util/color.js\");\n\n// Dimensions of sunburst.\nvar width = 750;\nvar height = 600;\nvar radius = Math.min(width, height) / 2;\n\nvar legendData = {\n    \"afk\": color.getColorFromString(\"afk\"),\n    \"not-afk\": color.getColorFromString(\"not-afk\"),\n    \"hibernating\": color.getColorFromString(\"hibernating\"),\n}\n\nvar rootEl;  // The root DOM node of the graph as a d3 object\nvar vis;     // The root SVG node of the graph as a d3 object\nvar partition;\nvar arc;\n\nfunction create(el) {\n  // Clear the svg in case we are redrawing\n  rootEl = d3.select(\".chart\");\n  rootEl.selectAll(\"svg\").remove();\n\n  vis = rootEl.append(\"svg:svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"svg:g\")\n      .attr(\"id\", \"container\")\n      .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n\n  drawLegend(el);\n\n  partition = d3.partition()\n      .size([2 * Math.PI, radius * radius]);\n\n  arc = d3.arc()\n      .startAngle(function(d) { return d.x0; })\n      .endAngle(function(d) { return d.x1; })\n      .innerRadius(function(d) { return Math.sqrt(d.y0); })\n      .outerRadius(function(d) { return Math.sqrt(d.y1); });\n}\n\nfunction drawClockTick(a) {\n  let xn = Math.cos(a);\n  let yn = Math.sin(a);\n\n  vis.append(\"line\")\n     .attr(\"x1\", 170 * xn)\n     .attr(\"y1\", 170 * yn)\n     .attr(\"x2\", 155 * xn)\n     .attr(\"y2\", 155 * yn)\n     .style(\"stroke\", \"#CCC\")\n     .style(\"stroke-width\", 1);\n}\n\nfunction drawClock(h, m, text) {\n  let a = 2 * Math.PI * ((h / 24) + (m / 24 / 60)) - (1/2 * Math.PI);\n  drawClockTick(a);\n\n  let xn = Math.cos(a);\n  let yn = Math.sin(a);\n\n  vis.append(\"text\")\n     .text(text || moment({hours: h}).format(\"HH:mm\"))\n     .attr(\"text-anchor\", \"middle\")\n     .attr(\"font-size\", \"1.2em\")\n     //.attr(\"font-weight\", \"bold\")\n     .style(\"fill\", \"#999\")\n     .attr(\"x\", 130 * xn)\n     .attr(\"y\", 5 + 140 * yn);\n\n}\n\n// Main function to draw and set up the visualization, once we have the data.\nfunction update(el, json) {\n  // Basic setup of page elements.\n  initializeBreadcrumbTrail();\n\n  el.querySelector(\"#container\").innerHTML = \"\";\n\n  // Bounding circle underneath the sunburst, to make it easier to detect\n  // when the mouse leaves the parent g.\n  vis.append(\"svg:circle\")\n      .attr(\"r\", radius)\n      .style(\"opacity\", 0);\n\n  // Turn the data into a d3 hierarchy and calculate the sums.\n  var root = d3.hierarchy(json);\n  var nodes = partition(root);\n\n  let mode_clock = true;\n  if(mode_clock) {\n    // TODO: Make this a checkbox in the UI\n    let show_whole_day = true;\n\n    let root_start = moment(json.timestamp);\n    let root_end = moment(json.timestamp).add(json.duration, \"seconds\");\n    if(show_whole_day) {\n      root_start = root_start.startOf(\"day\");\n      root_end = root_start.clone().endOf(\"day\");\n\n      drawClock(0, 0);\n      drawClock(6, 0);\n      drawClock(12, 0);\n      drawClock(18, 0);\n\n      // TODO: Draw only if showing today\n      let now = moment();\n      drawClock(now.hour(), now.minute(), \"Now\");\n    }\n\n    nodes = nodes.each(function(d) {\n        let loc_start_sec = moment(d.data.timestamp).diff(root_start, \"seconds\", true);\n        let loc_end_sec = moment(d.data.timestamp).add(d.data.duration, \"seconds\").diff(root_start, \"seconds\", true);\n\n        let loc_start = Math.max(0, loc_start_sec / ((root_end - root_start) / 1000));\n        let loc_end = Math.min(1, loc_end_sec / ((root_end - root_start) / 1000));\n\n        d.x0 = 2 * Math.PI * loc_start;\n        d.x1 = 2 * Math.PI * loc_end;\n      }).descendants()\n  } else {\n      root = root.sum((d) => d.duration)\n                 .sort((a, b) => JSON.stringify(a.data.data).localeCompare(JSON.stringify(b.data.data)));\n      nodes = nodes.descendants();\n  }\n\n  // For efficiency, filter nodes to keep only those large enough to see.\n  nodes = nodes.filter(function(d) {\n    // 0.005 radians = 0.29 degrees\n    // If show_whole_day:\n    //   0.0044 rad = 1min\n    //   0.0011 rad = 15s\n    let threshold = 0.001;\n    return (d.x1 - d.x0 > threshold);\n  });\n\n  vis.data([json]).selectAll(\"path\")\n      .data(nodes)\n      .enter().append(\"svg:path\")\n      .attr(\"display\", function(d) { return d.depth ? null : \"none\"; })\n      .attr(\"d\", arc)\n      .attr(\"fill-rule\", \"evenodd\")\n      .style(\"fill\", function(d) {\n          return color.getColorFromString(d.data.data.status || d.data.data.app);\n      })\n      .style(\"opacity\", 1)\n      .on(\"mouseover\", mouseover)\n      .on(\"click\", mouseclick);\n\n  // Add the mouseleave handler to the bounding circle.\n  d3.select(\"#container\").on(\"mouseleave\", mouseleave);\n}\n\nfunction mouseclick(d) {\n  console.log(\"Clicked\");\n  console.log(d);\n}\n\nfunction showInfo(d) {\n  let hoverEl = d3.select(\".explanation > .hover\");\n\n  let m = moment(d.data.timestamp);\n  hoverEl.select(\".date\")\n      .text(m.format(\"YYYY-MM-DD\"));\n  hoverEl.select(\".time\")\n      .text(m.format(\"HH:mm:ss\"));\n\n  let durationString = time.seconds_to_duration(d.data.duration);\n  hoverEl.select(\".duration\")\n      .text(durationString);\n\n  hoverEl.select(\".title\")\n    .text(d.data.data.app || d.data.data.status);\n\n  hoverEl.select(\".data\")\n      .text(d.data.data.title || \"\");\n\n  d3.select(\".explanation > .base\")\n      .style(\"display\", \"none\");\n  hoverEl.style(\"visibility\", \"\");\n}\n\n// Fade all but the current sequence, and show it in the breadcrumb trail.\nfunction mouseover(d) {\n  showInfo(d);\n\n  var sequenceArray = d.ancestors().reverse();\n  sequenceArray.shift(); // remove root node from the array\n\n  // Fade all the segments.\n  rootEl.selectAll(\"path\")\n      .style(\"opacity\", 0.5);\n\n  // Then highlight only those that are an ancestor of the current segment.\n  // FIXME: This currently makes all other svg paths on the page faded as well\n  rootEl.selectAll(\"path\")\n      .filter(function(node) {\n                return (sequenceArray.indexOf(node) >= 0);\n              })\n      .style(\"opacity\", 1);\n}\n\n// Restore everything to full opacity when moving off the visualization.\nfunction mouseleave() {\n  // Deactivate all segments during transition.\n  rootEl.selectAll(\"path\").on(\"mouseover\", null);\n\n  // Transition each segment to full opacity and then reactivate it.\n  rootEl.selectAll(\"path\")\n    .transition()\n    .duration(100)\n    .style(\"opacity\", 1)\n    .on(\"end\", function() {\n                 d3.select(this).on(\"mouseover\", mouseover);\n               });\n\n  rootEl.select(\".explanation > .base\")\n        .style(\"display\", \"\");\n  rootEl.select(\".explanation > .hover\")\n        .style(\"visibility\", \"hidden\");\n}\n\nfunction initializeBreadcrumbTrail() {\n  // Add the svg area.\n  var trail = d3.select(\".sequence\").append(\"svg:svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", 50)\n      .attr(\"id\", \"trail\");\n  // Add the label at the end, for the percentage.\n  trail.append(\"svg:text\")\n    .attr(\"id\", \"endlabel\")\n    .style(\"fill\", \"#000\");\n}\n\nfunction drawLegend() {\n  // Dimensions of legend item: width, height, spacing, radius of rounded rect.\n  var li = {\n    w: 75, h: 30, s: 3, r: 3\n  };\n\n  var legend = d3.select(\".legend\").append(\"svg:svg\")\n      .attr(\"width\", li.w)\n      .attr(\"height\", d3.keys(legendData).length * (li.h + li.s));\n\n  var g = legend.selectAll(\"g\")\n      .data(d3.entries(legendData))\n      .enter().append(\"svg:g\")\n      .attr(\"transform\", function(d, i) {\n              return \"translate(0,\" + i * (li.h + li.s) + \")\";\n           });\n\n  g.append(\"svg:rect\")\n      .attr(\"rx\", li.r)\n      .attr(\"ry\", li.r)\n      .attr(\"width\", li.w)\n      .attr(\"height\", li.h)\n      .style(\"fill\", function(d) { return d.value; });\n\n  g.append(\"svg:text\")\n      .attr(\"x\", li.w / 2)\n      .attr(\"y\", li.h / 2)\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"text-anchor\", \"middle\")\n      .text(function(d) { return d.key; });\n}\n\n// NOTE: The original version of this sunburst contained a buildHierarchy\n//       function that's not used in our version.\n\nexport default {\n    \"create\": create,\n    \"update\": update\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sunburst.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sunburst.vue?vue&type=script&lang=js&\"","<template lang=\"pug\">\ndiv.sunburst\n  div.sidebar\n    div.legend\n\n  div.main\n    div.chart\n      div.explanation\n        div.base\n          | {{ centerMsg }}\n        div.hover(style=\"visibility: hidden\")\n          div.date\n          div.title\n          div.time\n          div.duration\n          div.data(style=\"text-overflow: ellipsis; white-space: nowrap; overflow: hidden;\")\n</template>\n\n<style scoped lang=\"scss\">\n.sunburst {\n  font-family: 'Open Sans', sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  width: 100%;\n  height: 620px;\n  margin-top: 10px;\n\n  .main {\n    width: 750px;\n    margin-right: auto;\n    margin-left: auto;\n  }\n\n  .sidebar {\n    float: right;\n    height: 0;\n    width: 100px;\n  }\n\n  .sequence {\n    width: 600px;\n    height: 70px;\n  }\n\n  .legend {\n    padding: 10px 0 0 3px;\n  }\n\n  .sequence text, .legend text {\n    font-weight: 600;\n    fill: #fff;\n  }\n\n  .chart {\n    position: relative;\n  }\n\n  .chart path {\n    stroke: #fff;\n  }\n\n  .explanation {\n    position: absolute;\n    top: 260px;\n    left: 305px;\n    width: 140px;\n    text-align: center;\n    color: #666;\n    z-index: 10; // might not be needed\n\n    .base {\n        color: #DDD;\n        font-size: 2em;\n    }\n\n    .hover {\n      .date {\n        font-size: 0.8em;\n      }\n\n      .time {\n        font-size: 1em;\n      }\n\n      .title {\n        font-size: 2em;\n        font-weight: bold;\n      }\n\n      .duration {\n        font-size: 1em;\n      }\n\n      .data {\n        font-size: 1em;\n      }\n    }\n  }\n}\n</style>\n\n<script>\n// NOTE: This is just a Vue.js component wrapper for timeline-simple.js\n//       Code should generally go in the framework-independent file.\n\n// TODO: Sunburst requires a hierarchical data format\n\nimport sunburst from './sunburst.js';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nlet aw_sunburst = {\n  name: \"aw-sunburst\",\n  props: ['date', 'afkBucketId', 'windowBucketId'],\n  mounted: function() {\n    sunburst.create(this.$el);\n    this.starttime = moment(this.date);\n    this.endtime = moment(this.date).add(1, 'days');\n    this.visualize();\n  },\n\n  data: () => {\n    return {\n      starttime: moment(),\n      endtime: moment(),\n      centerMsg: \"Loading...\",\n    }\n  },\n\n  watch: {\n    \"date\": function(to) {\n      this.starttime = moment(to);\n      this.endtime = moment(this.starttime).add(1, 'days');\n      this.visualize();\n    }\n  },\n\n  methods: {\n    todaysEvents: function(bucket_id) {\n      return this.$aw.getEvents(bucket_id, {\n        limit: -1,\n        start: this.starttime.format(), end: this.endtime.format()\n      });\n    },\n\n    visualize: function() {\n      function buildHierarchy(parents, children) {\n          parents = _.sortBy(parents, \"timestamp\", \"desc\");\n          children = _.sortBy(children, \"timestamp\", \"desc\");\n\n          var i_child = 0;\n          for(var i_parent = 0; i_parent < parents.length; i_parent++) {\n              let p = parents[i_parent];\n              let p_start = moment(p.timestamp);\n              let p_end = p_start.clone().add(p.duration, \"seconds\");\n\n              p.children = [];\n              while(i_child < children.length) {\n                  var e = children[i_child];\n                  var e_start = moment(e.timestamp);\n                  var e_end = e_start.clone().add(e.duration, \"seconds\");\n\n                  let before_parent = e_end.isBefore(p_start);\n                  let within_parent = e_start.isAfter(p_start) && e_end.isBefore(p_end);\n                  let after_parent = e_start.isAfter(p_end);\n\n                  // TODO: This isn't correct, yet\n                  if(before_parent) {\n                    // Child is behind parent\n                    //console.log(\"Too far behind: \" + i_child);\n                    i_child++;\n                  } else if(within_parent) {\n                    //console.log(\"Added relation: \" + i_child);\n                    p.children = _.concat(p.children, e);\n                    i_child++;\n                  } else if(after_parent) {\n                    // Child is ahead of parent\n                    //console.log(\"Too far ahead: \" + i_child);\n                    break;\n                  } else {\n                    // TODO: Split events when this happens\n                    console.warn(\"Between parents\");\n                    p.children = _.concat(p.children, e);\n                    i_child++;\n                  }\n              }\n          }\n\n          // Build the root node\n          //console.log(parents);\n          let m_start = moment(_.first(parents).timestamp)\n          let m_end = moment(_.tail(parents).timestamp)\n          let duration = (m_end - m_start) / 1000;\n          return {\n            \"timestamp\": _.first(parents).timestamp,\n            // TODO: If we want a 12/24h clock, this has to change\n            \"duration\": duration,\n            \"data\": {\"title\": \"ROOT\"},\n            \"children\": parents\n          }\n      }\n\n      this.todaysEvents(this.afkBucketId).then((events_afk) => {\n        this.todaysEvents(this.windowBucketId).then((events_window) => {\n          let hierarchy = null;\n          if(events_afk.length > 0 && events_window.length > 0) {\n            hierarchy = buildHierarchy(events_afk, events_window);\n            this.centerMsg = \"Hover to inspect\";\n          } else {\n            // FIXME: This should do the equivalent of \"No data\" when such is the case, but it doesn't.\n            hierarchy = {\n              \"timestamp\": \"\",\n              // TODO: If we want a 12/24h clock, this has to change\n              \"duration\": 0,\n              \"data\": {\"title\": \"ROOT\"},\n              \"children\": []\n            };\n            this.centerMsg = \"No data\";\n          }\n          sunburst.update(this.$el, hierarchy);\n        });\n      });\n    },\n  },\n}\n\nexport default aw_sunburst;\n</script>\n","import { render, staticRenderFns } from \"./Sunburst.vue?vue&type=template&id=d0f05cca&scoped=true&lang=pug&\"\nimport script from \"./Sunburst.vue?vue&type=script&lang=js&\"\nexport * from \"./Sunburst.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Sunburst.vue?vue&type=style&index=0&id=d0f05cca&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d0f05cca\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}